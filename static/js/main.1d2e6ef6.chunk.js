(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){e.exports=n(179)},109:function(e,t,n){},179:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),i=n(48),s=(n(109),n(88)),u=n(15),l=n(185),d=n(31);var m=Object(u.a)({cardRoot:{margin:"1em"},cardText1stLine:{fontSize:"14px"},cardText2ndLine:{paddingTop:"16px",fontSize:"14px",paddingBottom:"2em"}})(function(e){var t=e.classes;return r.a.createElement(l.a,{interactive:!0,elevation:d.a.TWO,className:t.cardRoot},r.a.createElement("h1",null,"Contacts App"),r.a.createElement("div",{className:t.cardText1stLine},"Learning Immer (Bey)"),r.a.createElement("div",{className:t.cardText2ndLine},"This is a example app using immer and react context + hooks."))}),p=n(57),f=n(58),g=n(66),b=n(59),v=n(65),h=n(43),E=n(8),O=n(27),C=n(192),x=n(53),F=n(38),j=n(186),T=n(187);function y(e){var t=e.input,n=e.label,a=e.placeholder,c=e.meta,o=c.touched,i=c.error,s=Object(F.a)(e,["input","label","placeholder","meta"]);return r.a.createElement(j.a,{helperText:i,label:n,intent:o&&i?"danger":void 0},r.a.createElement(T.a,Object.assign({placeholder:a,intent:o&&i?"danger":void 0},t,s)))}y.defaultProps={custom:{}};var D=y,k=n(99),w=n(91),N=n(190);var S=Object(u.a)({contactGroupMultiSelect:{"&.bp3-popover-target":{width:"100%"}},contactGroupTagInputProps:{"& .bp3-input-ghost":{fontSize:"14px"}}})(function(e){var t=e.options,n=e.input,a=n.value,c=n.onChange,o=e.label,i=e.meta,s=i.touched,u=i.error,l=e.classes,d=Object(F.a)(e,["options","input","label","meta","classes"]),m={};return t&&t.length>0&&t.forEach(function(e){m[e.value]=e}),r.a.createElement(j.a,{helperText:u,label:o,intent:s&&u?"danger":void 0},r.a.createElement(N.a,Object.assign({shouldDismissPopover:!1,noResults:r.a.createElement(w.a,{disabled:!0,text:"No results."}),popoverProps:{minimal:!0,targetClassName:l.contactGroupMultiSelect},items:t,selectedItems:""===a?[]:a,onItemSelect:function(e){-1===a.indexOf(e.value)?c([].concat(Object(k.a)(a),[e.value])):(a.splice(a.indexOf(e.value),1),c(a))},tagInputProps:{placeholder:"Select contact groups...",fill:!0,className:l.contactGroupTagInputProps,onRemove:function(e,t){a&&a.length>0&&(a.splice(t,1),c(a))}},itemRenderer:function(e,t){var n=t.handleClick;return r.a.createElement(w.a,{active:-1!==a.indexOf(e.value),key:"option-".concat(e.value),text:e.text,onClick:n})},tagRenderer:function(e){return m[e].text}},d)))}),L=function(e){return void 0!==e&&null!==e&&""!==e},A=function(e){if(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)}return!0},I=function(e){return!e||new RegExp("^(?:(?:https?|ftp)://)(?:S+(?::S*)?@)?(?:(?!10(?:.d{1,3}){3})(?!127(?:.d{1,3}){3})(?!169.254(?:.d{1,3}){2})(?!192.168(?:.d{1,3}){2})(?!172.(?:1[6-9]|2d|3[0-1])(?:.d{1,3}){2})(?:[1-9]d?|1dd|2[01]d|22[0-3])(?:.(?:1?d{1,2}|2[0-4]d|25[0-5])){2}(?:.(?:[1-9]d?|1dd|2[0-4]d|25[0-4]))|(?:(?:[a-z\xa1-\uffff0-9]+-?)*[a-z\xa1-\uffff0-9]+)(?:.(?:[a-z\xa1-\uffff0-9]+-?)*[a-z\xa1-\uffff0-9]+)*(?:.(?:[a-z\xa1-\uffff]{2,})))(?::d{2,5})?(?:/[^s]*)?").test(e)},M=function(e,t){return e&&e.length>t};function R(e){var t={};return L(e.email)?A(e.email)||(t.email="Email format is incorrect"):t.email="Email is required",L(e.name)||(t.name="Name is Required"),I(e.imgUrl)||(t.imgUrl="Invalid url"),t}var P=n(24),_=n.n(P),z=n(36),G=Object(E.state)(null);var W={name:"snackbar",state:G,actions:{setMessage:function(e){Object(E.update)(G,function(){return e})},displayError:function(e){var t="Unknown error";e&&e.message?t=e.message:"string"===typeof e&&(t=e),Object(E.update)(G,function(){return t})},close:function(){Object(E.update)(G,function(){return null})}}},U=W.state,B=W.actions,H=n(14),V=n(75);V.initializeApp({apiKey:"AIzaSyB1GATIyuA6FNnAUMBz0kXJ62EvlSWx99o",authDomain:"redux-contacts-app.firebaseapp.com",databaseURL:"https://redux-contacts-app.firebaseio.com/"});var q=V,$="/groups";function J(){var e=q.database().ref("".concat($));return new Promise(function(t,n){e.once("value",function(e){var n=e.val(),a=[];return Object.keys(n).map(function(e){return a.push(Object(H.a)({id:e},n[e]))}),t(a)},function(e){return n(e)})})}function K(e){var t=q.database().ref("".concat($,"/").concat(e));return new Promise(function(n,a){t.once("value",function(t){var a=t.val();return a.id=e,n(a)},function(e){return a(e)})})}function Q(e){var t=q.database().ref("".concat($));return new Promise(function(n,a){var r=t.push();r.set(e,function(t){return t?a(t):n(Object(H.a)({id:r.key},e))})})}function X(e){var t=e.id,n=Object(F.a)(e,["id"]),a=q.database().ref("".concat($,"/").concat(t));return new Promise(function(e,r){a.set(Object(H.a)({},n),function(a){return a?r(a):e(Object(H.a)({id:t},n))})})}var Y="/jony";function Z(){var e=q.database().ref("".concat(Y));return new Promise(function(t,n){e.once("value",function(e){var n=e.val(),a=[];return Object.keys(n).map(function(e){return a.push(Object(H.a)({id:e},n[e]))}),t(a)},function(e){return n(e)})})}function ee(e){var t=q.database().ref("".concat(Y,"/").concat(e));return new Promise(function(n,a){t.once("value",function(t){var a=t.val();return a&&(a.id=e),n(a)},function(e){return a(e)})})}function te(e){var t=q.database().ref("".concat(Y));return new Promise(function(n,a){var r=t.push();r.set(e,function(t){return t?a(t):n(Object(H.a)({id:r.key},e))})})}function ne(e){var t=e.id,n=Object(F.a)(e,["id"]),a=q.database().ref("".concat(Y,"/").concat(t));return new Promise(function(e,r){a.set(Object(H.a)({},n),function(a){return a?r(a):e(Object(H.a)({id:t},n))})})}function ae(e){var t=q.database().ref("".concat(Y,"/").concat(e));return new Promise(function(n,a){t.set(null,function(t){return t?a(t):n({id:e})})})}var re=n(54),ce=n(96),oe=n(97),ie={HOME:"home",ADD_CONTACT:"addContact",LIST_CONTACTS:"listContacts",CONTACT_DETAILS:"contactDetails",ADD_GROUP:"addGroup",EDIT_CONTACT:"editContact"},se=[{name:ie.HOME,path:"/"},{name:ie.ADD_CONTACT,path:"/add"},{name:ie.LIST_CONTACTS,path:"/list"},{name:ie.EDIT_CONTACT,path:"/edit/:id"},{name:ie.CONTACT_DETAILS,path:"/detail/:id"},{name:ie.ADD_GROUP,path:"/group/add"}];var ue=function(){var e=Object(re.b)(se,{defaultRoute:"home",autoCleanup:!1});return e.usePlugin(ce.a,Object(oe.a)({useHash:!0,forceDeactivate:!1})),e}();ue.start();var le=ue.navigate,de=ue;function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{localLoading:!1};return e.actions&&Object.values(e.actions).length>0&&Object.keys(e.actions).forEach(function(n){if(e.actions[n]&&"function"===typeof e.actions[n]&&!0!==e.actions[n].isSync){var a=e.actions[n];e.actions[n]=function(){var r=Object(z.a)(_.a.mark(function r(){var c,o,i,s,u=arguments;return _.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:for(console.groupCollapsed("[".concat(e.name,"] executing action: ").concat(n,"()")),c=u.length,o=new Array(c),i=0;i<c;i++)o[i]=u[i];return console.log("Using arguments: ".concat(o)),console.groupEnd(),Le.setLoading(!0,e.name),t.localLoading&&!0!==e.state.get().loading&&Object(E.update)(e.state,function(e){e.loading=!0}),r.next=8,a.apply(void 0,o);case 8:return s=r.sent,t.localLoading&&!1!==e.state.get().loading&&Object(E.update)(e.state,function(e){e.loading=!1}),Le.setLoading(!1,e.name),r.abrupt("return",s);case 12:case"end":return r.stop()}},r,this)}));return function(){return r.apply(this,arguments)}}()}}),e}var pe=n(42),fe=n(72),ge=n(63),be=Object(E.state)({});var ve=n(33);var he=n(98),Ee=n.n(he);function Oe(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n&&n.length>0)return n.forEach(function(t){var n=Object(i.b)(t.state.get()),r=Object(ve.a)(n,2),c=r[0],o=r[1];e.push(c);var s=Object(a.useCallback)(function(){var e=t.state.get();e!==c&&o(e)});Object(a.useEffect)(function(){return t.state.on(s),function(){t.state.off(s)}})}),e;throw new Error("useMultipleStates requires at least one argument.")}function Ce(e,t,n,a,r,c,o){r.changes.push({oldState:t,newPartialState:n,moduleName:a});var i=[];i.push(setTimeout(function(){if(r.changes.length>0){var n=Object(H.a)({},r.oldState),a="";r.changes.forEach(function(e,t){a+=e.moduleName+(t!==r.changes.length-1?" + ":""),n=Object(H.a)({},n,Object(pe.a)({},e.moduleName,e.newPartialState))}),function(e,t,n,a,r,c,o){if(console.groupCollapsed("[".concat(a,"] rendering [").concat(r,"] changes from ").concat(c," at: ").concat((new Date).getMilliseconds())),console.log("NEW STATE: ",n),console.log(Object(ge.diffString)(t,n)),console.groupEnd(),o>0)return e(n)}(e,t,n,a,r.changes.length,c,o),r.oldState=n,r.changes=[],i.forEach(function(e){return clearTimeout(e)}),i=[]}},0))}function xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r={};if(e&&"object"===typeof e&&Object.keys(e).length>0){var c=Object.keys(e);c.forEach(function(n){var a=e[n],c=a.state.get(),o=t[n];r=Object(H.a)({},r,Object(pe.a)({},a.name,o?o(c):c))});var o=Object(i.b)(r,n),s=Object(ve.a)(o,2),u=s[0],l=s[1],d={oldState:u,newState:{},changes:[]},m=0;return c.forEach(function(r){var c=e[r],o=t[r],i=function(){var e=c.state.get(),t=o?o(e):e;Ee()(t,u[c.name])||Ce(l,u,t,c.name,d,n,m)};Object(a.useEffect)(function(){return m+=1,c.state.on(i),function(){m-=1,c.state.off(i)}})}),u}throw new Error("useMultiple requires at least one object argument with one moduleState key.")}r.a.createElement(i.a);var Fe=me,je=function(e){if(e.actions&&"object"===typeof e.actions){var t=e.state.get();e.state.set(Object(H.a)({},t,{modified:!1})),e.actions.setModified=function(t){e.state.get().modified!==t&&Object(E.update)(e.state,function(e){e.modified=t})}}return e},Te=function(e){if(e.actions&&"object"===typeof e.actions){var t=e.name||Symbol("state module name is not defined");be.set(Object(H.a)({},be.get(),Object(pe.a)({},t,{changes:[]}))),e.state.on(function(){var n=e.state.get();Object(E.update)(be,function(e){var a=e[t].changes[e[t].changes.length-1],r=a?Object(fe.original)(a).snapshot:void 0;e[t].changes.push({snapshot:n,updatedAt:Date.now()}),console.groupCollapsed("[".concat(t,"] state changed at: ").concat((new Date).getMilliseconds())),console.log("FROM:",r),console.log("TO:",n),console.log("DIFF:"),console.log(Object(ge.diffString)(r,n)),console.groupEnd()})})}return e},ye=function(e){return e&&"object"===typeof e&&e.state&&"object"===typeof e.state&&(e.state.useState=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return n?Oe.apply(void 0,n):Oe(e)}),e},De="list",ke="card",we=Object(E.state)({loading:{state:!1,total:0,message:null},mode:De,menu:{left:!0,right:!0}});var Ne={name:"global",state:we,actions:{setLoading:function(e,t){Object(E.update)(we,function(n){e?n.loading.total+=1:n.loading.total-=1,n.loading.state=n.loading.total>0,n.loading.message=t})},changeMode:function(e){e!==De&&e!==ke||(Object(E.update)(we,function(t){t.mode=e}),B.setMessage("Mode changed to: ".concat(e)))},toggleLeftMenu:function(){Object(E.update)(we,function(e){e.menu.left=!e.menu.left})},setRightMenuVisibility:function(e){Object(E.update)(we,function(t){t.menu.right=e})}},selectors:{loader:function(e){return{loading:e.loading}}}},Se=Ne.state,Le=Ne.actions,Ae=Ne.selectors,Ie=Te(Ne),Me={List:ie.LIST_CONTACTS,About:ie.HOME,"Add Contact":ie.ADD_CONTACT,"Add Group":ie.ADD_GROUP},Re={transitionToEditContact:function(e){Le.setRightMenuVisibility(!0),le(ie.EDIT_CONTACT,{id:e})},transitionToContactDetail:function(e){Le.setRightMenuVisibility(!0),le(ie.CONTACT_DETAILS,{id:e})},transitionToMenuOption:function(e){return le(Me[e])},goBack:function(){return window.history.back()},router:{canDeactivate:de.canDeactivate}},Pe=Object(E.state)({route:{},previousRoute:{}}),_e={name:"history",state:Pe,actions:Re};de.subscribe(function(e){Object(E.update)(Pe,function(t){t.route=e.route,t.previousRoute=e.previousRoute})});var ze=_e.actions,Ge=_e,We=Object(E.state)({list:{},groups:{},current:{}});function Ue(e){return Be.apply(this,arguments)}function Be(){return(Be=Object(z.a)(_.a.mark(function e(t){var n,a,r,c;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:if(n=e.sent,a={},n.forEach(function(e){a[e.id]=e}),!t){e.next=12;break}return e.next=8,ee(t);case 8:e.t0=e.sent,r=[e.t0],e.next=15;break;case 12:return e.next=14,Z();case 14:r=e.sent;case 15:c={},r.forEach(function(e){e&&(e.groups&&e.groups.length>0&&(e.groupNames=e.groups.map(function(e){return a[e]?a[e].name:""}).join(", ")),c[e.id]=e)}),Object(E.update)(We,function(e){t?e.current=c[t]||{}:e.list=c,e.groups=a});case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function He(){return(He=Object(z.a)(_.a.mark(function e(t){var n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.id){e.next=7;break}return e.next=4,ne(t);case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,te(t);case 9:n=e.sent;case 10:console.log("current contact updated:",n),Object(E.update)(We,function(e){e.current=t,e.modified=!1}),B.setMessage("Contact ".concat(t.id?"updated":"created"," successfully")),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),B.displayError(e.t0);case 18:ze.goBack();case 19:case"end":return e.stop()}},e,this,[[0,15]])}))).apply(this,arguments)}function Ve(){return(Ve=Object(z.a)(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=7;break}return e.next=4,ae(t);case 4:Object(E.update)(We,function(e){e.current={}}),B.setMessage("Contact deleted successfully"),Ue();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),B.displayError(e.t0);case 12:ze.goBack();case 13:case"end":return e.stop()}},e,this,[[0,9]])}))).apply(this,arguments)}var qe={name:"contacts",state:We,actions:{loadData:Ue,saveContact:function(e){return He.apply(this,arguments)},deleteContact:function(e){return Ve.apply(this,arguments)}},selectors:{contactForm:function(e){return{current:e.current,groups:e.groups}},contactList:function(e){return{current:e.current,list:e.list,groups:e.groups}},contactListGlobal:function(e){return{mode:e.mode}},contactDetail:function(e){return{current:e.current,loading:e.loading}}}},$e=qe.actions,Je=qe.state,Ke=qe.selectors,Qe=ye(Te(je(Fe(qe,{localLoading:!0})))),Xe=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(g.a)(this,Object(b.a)(t).call(this,e))).state={alertIsOpen:!1},n.handleCancel=n.handleCancel.bind(Object(h.a)(Object(h.a)(n))),n.handleContinue=n.handleContinue.bind(Object(h.a)(Object(h.a)(n))),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.route.params.id;if(t&&$e.loadData(t),ze.router){var n=function(t){return function(t,n){return!Je.get().modified||new Promise(function(t,n){e.setState({alertIsOpen:!0,continue:n,cancel:t})})}};ze.router.canDeactivate(ie.ADD_CONTACT,n),ze.router.canDeactivate(ie.EDIT_CONTACT,n)}}},{key:"componentWillReceiveProps",value:function(e){this.props.route.params.id!==e.route.params.id&&$e.loadData(e.route.params.id)}},{key:"handleCancel",value:function(){this.state.continue(),this.setState({alertIsOpen:!1})}},{key:"handleContinue",value:function(){this.state.cancel(),this.setState({alertIsOpen:!1})}},{key:"render",value:function(){var e=this,t=this.state.alertIsOpen,n=this.props.classes;return r.a.createElement("div",null,r.a.createElement(C.a,{cancelButtonText:"Cancel",confirmButtonText:"Continue",icon:"trash",intent:"danger",isOpen:t,onCancel:this.handleCancel,onConfirm:this.handleContinue},r.a.createElement("p",null,"Are you sure you want leave? Your changes will be lost.")),r.a.createElement(E.Subscribe,{to:Je,on:Ke.contactForm},function(t){return r.a.createElement(O.b,{onSubmit:$e.saveContact,validate:R,initialValues:e.props.route.params.id?t.current:{},render:function(e){var a=e.handleSubmit,c=e.pristine,o=e.invalid,i=e.submitting,s=e.reset;return r.a.createElement(l.a,{interactive:!0,elevation:d.a.TWO,className:n.formCard},r.a.createElement("form",{className:n.formContainer,onSubmit:a},r.a.createElement(O.c,{onChange:function(e){var t=e.dirty;$e.setModified(t&&!i)}}),r.a.createElement(O.a,{name:"name",label:"Name",placeholder:"Name",component:D}),r.a.createElement(O.a,{name:"email",label:"Email",placeholder:"Email",component:D}),r.a.createElement(O.a,{name:"phoneNumber",label:"Phone number",placeholder:"Phone number",component:D}),r.a.createElement(O.a,{name:"imgUrl",label:"Profile image url",placeholder:"Profile image url",component:D}),r.a.createElement(O.a,{name:"groups",component:S,label:"Groups",options:Object.values(t.groups).map(function(e){return{value:e.id,text:e.name}})}),r.a.createElement("div",{className:n.buttonsContainer},r.a.createElement(x.b,{text:"Save contact",icon:"floppy-disk",intent:"success",type:"submit",disabled:c||i||o}),r.a.createElement(x.b,{text:"Reset values",disabled:c||i,icon:"refresh",intent:"danger",onClick:s}))))}})}))}}]),t}(a.Component),Ye=Object(u.a)({formCard:{width:"300px",margin:"0.5em 1em",padding:"1em"},formContainer:{paddingTop:"16px"},buttonsContainer:{display:"flex",justifyContent:"space-between"}})(Xe),Ze=n(69),et=n(52),tt=function(e){var t=e.contact,n=e.onEditClick,a=e.onDeleteClick,c=(e.big,e.loading),o=e.classes,i=t.name,s=t.imgUrl,u=t.email,m=t.groupNames,p=c?et.a.SKELETON:"";return r.a.createElement(l.a,{interactive:!0,elevation:d.a.TWO,className:o.cardRoot},r.a.createElement("div",{className:o.cardContentContainer},r.a.createElement("h1",{className:o.cardHeader},r.a.createElement("span",{className:p},i||"...")),r.a.createElement("img",{alt:"contact",src:s||"http://i.imgur.com/mbZIBzc.png",className:o.cardImage})),r.a.createElement("div",{className:o.cardTextContainer},r.a.createElement("span",{className:p},u||"..."),r.a.createElement("br",null),r.a.createElement("span",{className:"".concat(o.cardTextGroup," ").concat(p)},m||"Without group")),r.a.createElement("div",{className:o.buttonContainer},r.a.createElement(x.b,{onClick:n,text:"Edit",className:o.button}),r.a.createElement(x.b,{onClick:a,text:"Delete",className:o.button})))};tt.defaultProps={big:!1,loading:!1};var nt=Object(u.a)({cardRoot:function(e){return{width:e.big?"auto":"300px",padding:e.big?"inherit":"0px","& .bp3-card.bp3-interactive":{margin:"1em",padding:0}}},cardContentContainer:{position:"relative",textAlign:"center",height:300,width:300},cardHeader:{position:"absolute",bottom:"0px",right:"0px",left:"0px",padding:"8px",margin:"0",color:"white",background:"rgba(0, 0, 0, 0.54)"},cardImage:{maxHeight:300,maxWidth:300},cardTextContainer:{fontSize:"12pt",padding:"8px"},cardTextGroup:{fontSize:"10pt",color:"grey"},buttonContainer:{padding:"8px",position:"relative"},button:{marginRight:"8px"}})(tt),at=Ze.b.div({hoverable:!0,init:{scale:1},hover:{scale:1.2}}),rt=Ze.b.div({enter:{opacity:1,transition:function(e){return{delay:50*e.i}}},exit:{opacity:0},props:{i:0}});function ct(e){return e.list.map(function(e){return r.a.createElement(nt,{key:"contact-".concat(e.id),contact:e,onEditClick:function(){return ze.transitionToEditContact(e.id)},onDeleteClick:function(){return $e.deleteContact(e.id)}})})}function ot(e){var t=e.classes,n=e.list,a=e.current;return r.a.createElement(Ze.a,null,n.map(function(e,n){return r.a.createElement(rt,{key:"contact-".concat(e.id),id:e.id,i:n},r.a.createElement("div",{role:"presentation",onKeyPress:function(t){return"Enter"===t.key&&ze.transitionToContactDetail(e.id)},onClick:function(){return ze.transitionToContactDetail(e.id)},className:"bp3-tag bp3-interactive ".concat(t.contactListItem," ").concat(a.id===e.id?"selected":"")},r.a.createElement("div",{style:{display:"flex"}},e.imgUrl?r.a.createElement(at,null,r.a.createElement("img",{src:e.imgUrl,alt:e.name,className:t.contactListItemImage})):r.a.createElement(at,{className:t.contactListItemAvatar},e.name.substring(0,1).toUpperCase()),r.a.createElement("div",{className:t.contactListItemTextContainer},r.a.createElement("div",{className:t.contactListItemText1stLine},e.name),r.a.createElement("div",{className:t.contactListItemText2ndLine},e.groupNames||"Without group"))),r.a.createElement(at,null,r.a.createElement(x.b,{icon:"delete",onClick:function(t){$e.deleteContact(e.id),t.stopPropagation()}}))))}))}var it=r.a.memo(function(e){var t=xe({contacts:Qe,global:Ie},{contacts:Ke.contactList,global:Ke.contactListGlobal},"ContactList"),n=t.contacts,c=t.global;return Object(a.useEffect)(function(){$e.loadData()},[]),r.a.createElement("div",{className:e.classes.contactListRoot},"list"===c.mode?r.a.createElement("div",{className:e.classes.contactListItemsContainer},r.a.createElement(ot,Object.assign({},e,{current:n.current,list:Object.values(n.list)}))):r.a.createElement("div",{className:e.classes.contactListCardsContainer},r.a.createElement(ct,Object.assign({},e,{current:n.current,list:Object.values(n.list)}))))}),st=Object(u.a)({contactListItem:{"&.bp3-tag.bp3-interactive":{display:"flex",justifyContent:"space-between",height:"60px",paddingLeft:"8px",margin:"3px",backgroundColor:"#394b59",color:"white",boxShadow:"0 0 0 1px rgba(16, 22, 26, 0.2), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.4)"},"&.bp3-tag.bp3-interactive:hover":{background:"#202B33"},"&.bp3-tag.bp3-interactive.selected":{background:"#5C7080"}},contactListItemImage:{maxWidth:50,minWidth:50,maxHeight:50},contactListItemTextContainer:{display:"flex",flexDirection:"column",alignSelf:"center",marginLeft:"2rem"},contactListItemText1stLine:{fontWeight:"bolder"},contactListItemText2ndLine:{fontSize:"12px"},contactListItemAvatar:{width:"50px",height:"50px",fontSize:"35px",backgroundColor:"#182026",color:"white",textAlign:"center",lineHeight:"50px",borderRadius:"50px"},contactListRoot:{margin:"0.2em 0 0 0",display:"flex",flex:"1 0 auto",flexDirection:"row"},contactListItemsContainer:{display:"flex",flex:"1 0 auto",flexDirection:"column"},contactListCardsContainer:{flexWrap:"wrap"}})(it);var ut=Object(u.a)({contactDetailRoot:{margin:"0.5em 1em",width:"300px"}})(function(e){var t=xe({contacts:Qe},{contacts:Ke.contactDetail},"ContactDetail").contacts;return Object(a.useEffect)(function(){$e.loadData(e.route.params.id)},e.route.params.id),r.a.createElement("div",{className:e.classes.contactDetailRoot},r.a.createElement(nt,{big:!0,contact:t.current,loading:t.loading,onEditClick:function(){return ze.transitionToEditContact(e.route.params.id)},onDeleteClick:function(){return $e.deleteContact(e.route.params.id)}}))});function lt(e){var t={};return L(e.name)?M(e.name,4)||(t.name="Name has to 4 o more characters"):t.name="Name is required",t}var dt=Object(E.state)({list:{},current:{}});function mt(){return(mt=Object(z.a)(_.a.mark(function e(t){var n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,K(t);case 3:n=e.sent,Object(E.update)(dt,function(e){e.current=n}),e.next=11;break;case 7:return e.next=9,J();case 9:n=e.sent,Object(E.update)(dt,function(e){e.list=n});case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function pt(){return(pt=Object(z.a)(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.id){e.next=7;break}return e.next=4,X(t);case 4:B.setMessage("Group updated successfully"),e.next=10;break;case 7:return e.next=9,Q(t);case 9:B.setMessage("Group created successfully");case 10:Object(E.update)(dt,function(e){e.current=t}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),B.displayError(e.t0);case 16:ze.goBack();case 17:case"end":return e.stop()}},e,this,[[0,13]])}))).apply(this,arguments)}var ft={name:"groups",state:dt,actions:{loadData:function(e){return mt.apply(this,arguments)},saveGroup:function(e){return pt.apply(this,arguments)}}},gt=ft.state,bt=ft.actions,vt=(me(ft),function(e){function t(){return Object(p.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.route.params.id;e&&bt.loadData(e)}},{key:"componentWillReceiveProps",value:function(e){this.props.route.params.id!==e.route.params.id&&bt.loadData(e.route.params.id)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(E.Subscribe,{to:gt},function(t){return r.a.createElement(O.b,{onSubmit:bt.saveGroup,validate:lt,initialValues:t.current,render:function(t){var n=t.handleSubmit,a=t.pristine,c=t.invalid,o=t.submitting,i=t.form.reset;return r.a.createElement(l.a,{interactive:!0,elevation:d.a.TWO,className:e.formCard},r.a.createElement("form",{className:e.formContainer,onSubmit:n},r.a.createElement(O.a,{name:"name",label:"Name",placeholder:"Name",component:D}),r.a.createElement("div",{className:e.buttonsContainer},r.a.createElement(x.b,{icon:"floppy-disk",intent:"success",type:"submit",disabled:a||o||c,text:"Save group"}),r.a.createElement(x.b,{icon:"refresh",intent:"danger",onClick:i,disabled:a||o,text:"Reset values"}))))}})})}}]),t}(a.Component)),ht=Object(u.a)({formCard:{width:"300px",margin:"0.5em 1em",padding:"1em"},formContainer:{paddingTop:"16px"},buttonsContainer:{display:"flex",justifyContent:"space-between"}})(vt),Et=n(64),Ot={sidebar:{root:{position:"initial"},content:{display:"none"},overlay:{display:"none"},sidebar:{background:"#30404d",paddingTop:"3.5rem"}}},Ct=window.matchMedia("(min-width: 800px)");var xt=Object(u.a)(Ot)(function(e){var t=Object(a.useState)({isSmallScreen:!Ct.matches,isOpen:!0}),n=Object(ve.a)(t,2),c=n[0],o=n[1];function i(){o(Object(H.a)({},c,{isSmallScreen:!Ct.matches}))}function s(){var e=Se.get().menu.right;e!==c.isOpen&&o(Object(H.a)({},c,{isOpen:e}))}Object(a.useEffect)(function(){return Ct.addListener(i),Se.on(s),function(){Ct.removeListener(i),Se.off(s)}});var u=c.isOpen;return c.isSmallScreen?r.a.createElement(Et.a,{open:u,pullRight:!0,touch:!0,styles:Ot.sidebar,onSetOpen:function(e){Le.setRightMenuVisibility(e)},sidebar:r.a.createElement("div",null,r.a.createElement(x.b,{className:"bp3-minimal",icon:"cross",onClick:function(){return Le.setRightMenuVisibility(!1)}}),e.children)},r.a.createElement(x.b,{className:"bp3-minimal",icon:"menu",onClick:function(){return Le.setRightMenuVisibility(!u)}})):e.children});var Ft=Object(u.a)({contactDetailsLayout:{display:"flex",flex:"1 0 auto"},editContactLayout:{display:"flex",flex:"1 0 auto"}})(function(e){var t=e.route,n=e.classes;if(!t)return r.a.createElement(m,{route:t});switch(t.name){case ie.ADD_GROUP:return r.a.createElement(ht,{route:t});case ie.CONTACT_DETAILS:return r.a.createElement("div",{className:n.contactDetailsLayout},r.a.createElement(st,null),r.a.createElement(xt,null,r.a.createElement(ut,{route:t})));case ie.LIST_CONTACTS:return r.a.createElement(st,{route:t});case ie.ADD_CONTACT:return r.a.createElement(Ye,{route:t});case ie.EDIT_CONTACT:return r.a.createElement("div",{className:n.editContactLayout},r.a.createElement(st,null),r.a.createElement(xt,null,r.a.createElement(Ye,{route:t})));case ie.HOME:default:return r.a.createElement(m,{route:t})}}),jt=n(191),Tt=n(32),yt=n(180),Dt=n(181),kt=n(23),wt=function(e){var t=e.changeListMode;return r.a.createElement(yt.a,{content:r.a.createElement(Dt.a,null,r.a.createElement(w.a,{text:"List",onClick:function(){return t("list")}}),r.a.createElement(w.a,{text:"Card",onClick:function(){return t("card")}})),position:kt.a.RIGHT_TOP},r.a.createElement(x.b,{icon:"more"}))};var Nt=function(e){var t=e.route;return r.a.createElement(E.Subscribe,{to:Se},function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(jt.a,null,r.a.createElement(jt.a.Group,{align:Tt.a.LEFT},r.a.createElement(x.b,{className:"bp3-minimal",icon:"menu",onClick:Le.toggleLeftMenu}),r.a.createElement(jt.a.Divider,null),r.a.createElement(jt.a.Heading,null,"Contacts app")),r.a.createElement(jt.a.Group,{align:Tt.a.RIGHT},t.name===ie.LIST_CONTACTS?r.a.createElement(wt,{changeListMode:Le.changeMode}):null)))})},St=n(188),Lt=n(182),At=n(189);var It=function(){var e=xe({global:Ie},{global:Ae.loader},"Loader").global;return r.a.createElement(St.a,{position:kt.a.TOP},e.loading.state?r.a.createElement(Lt.a,{message:r.a.createElement("div",null,r.a.createElement("span",null,"Loading ".concat(e.loading.message,"...")),r.a.createElement(At.a,null))}):null)};var Mt=function(){return r.a.createElement(E.Subscribe,{to:U},function(e){return r.a.createElement(St.a,{position:kt.a.BOTTOM},e?r.a.createElement(Lt.a,{message:e||"",timeout:3e3,onDismiss:B.close}):null)})},Rt={sidebar:{sidebar:{background:"#30404d"}},leftMenuRoot:{paddingTop:"4rem","&.selected":{background:"#5C7080"}}};var Pt=window.matchMedia("(min-width: 800px)"),_t=Object(u.a)(Rt)(function(e){var t=e.route,n=e.smallScreen,a=e.classes;function c(e){!function(e){ze.transitionToMenuOption(e.target.textContent)}(e),n&&Le.toggleLeftMenu()}return r.a.createElement(Dt.a,{className:a.leftMenuRoot},r.a.createElement(w.a,{active:t.name===ie.HOME,onClick:c,text:"About"}),r.a.createElement(w.a,{active:-1!==[ie.LIST_CONTACTS,ie.CONTACT_DETAILS,ie.EDIT_CONTACT].indexOf(t.name),onClick:c,text:"List"}),r.a.createElement(w.a,{active:t.name===ie.ADD_CONTACT,onClick:c,text:"Add Contact"}),r.a.createElement(w.a,{active:t.name===ie.ADD_GROUP,onClick:c,text:"Add Group"}))});var zt=function(e){var t=Object(a.useState)(!Pt.matches),n=Object(ve.a)(t,2),c=n[0],o=n[1];function i(){o(!Pt.matches)}Object(a.useEffect)(function(){return Pt.addListener(i),function(){Pt.removeListener(i)}});var s=xe({global:Ie},{global:function(e){return e.menu.left}},"LeftMenu").global;return!!s&&(c?r.a.createElement(Et.a,{open:s,styles:Rt.sidebar,onSetOpen:Le.toggleLeftMenu,sidebar:r.a.createElement(_t,Object.assign({smallScreen:c},e))},!1):r.a.createElement(_t,Object.assign({smallScreen:c},e)))};var Gt=function(e){var t=Object(s.a)({},e),n=xe({history:Ge},void 0,"ComponentSelector").history.route;return r.a.createElement("div",{className:"bp3-fill",style:{backgroundColor:"#30404d",minHeight:"100vh"}},r.a.createElement(Nt,{route:n}),r.a.createElement(It,null),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(zt,{route:n}),r.a.createElement(Ft,Object.assign({route:n},t))),r.a.createElement(Mt,null))},Wt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ut(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(function(){return r.a.createElement(i.a,null,r.a.createElement(Gt,null))},null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/ContactsAppRematch",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/ContactsAppRematch","/service-worker.js");Wt?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ut(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Ut(e)})}}()}},[[103,2,1]]]);
//# sourceMappingURL=main.1d2e6ef6.chunk.js.map