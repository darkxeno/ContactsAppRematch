(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,n){e.exports=n(178)},106:function(e,t,n){},178:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),i=n(60),s=(n(106),n(33)),u=n(14),l=n(184),d=n(20);var m=Object(u.a)({cardRoot:{margin:"1em"},cardText1stLine:{fontSize:"14px"},cardText2ndLine:{paddingTop:"16px",fontSize:"14px",paddingBottom:"2em"}})(function(e){var t=e.classes;return r.a.createElement(l.a,{interactive:!0,elevation:d.a.TWO,className:t.cardRoot},r.a.createElement("h1",null,"Contacts App"),r.a.createElement("div",{className:t.cardText1stLine},"Learning Immer (Bey)"),r.a.createElement("div",{className:t.cardText2ndLine},"This is a example app using immer and react context + hooks."))}),p=n(46),f=n(47),b=n(50),g=n(48),v=n(51),h=n(30),E=n(6),C=n(31),O=n(191),x=n(49),F=n(185),j=n(186);function T(e){var t=e.input,n=e.label,a=e.placeholder,c=e.meta,o=c.touched,i=c.error,u=Object(s.a)(e,["input","label","placeholder","meta"]);return r.a.createElement(F.a,{helperText:i,label:n,intent:o&&i?"danger":void 0},r.a.createElement(j.a,Object.assign({placeholder:a,intent:o&&i?"danger":void 0},t,u)))}T.defaultProps={custom:{}};var y=T,D=n(97),k=n(134),w=n(189);var N=Object(u.a)({contactGroupMultiSelect:{"&.bp3-popover-target":{width:"100%"}},contactGroupTagInputProps:{"& .bp3-input-ghost":{fontSize:"14px"}}})(function(e){var t=e.options,n=e.input,a=n.value,c=n.onChange,o=e.label,i=e.meta,u=i.touched,l=i.error,d=e.classes,m=Object(s.a)(e,["options","input","label","meta","classes"]),p={};return t&&t.length>0&&t.forEach(function(e){p[e.value]=e}),r.a.createElement(F.a,{helperText:l,label:o,intent:u&&l?"danger":void 0},r.a.createElement(w.a,Object.assign({shouldDismissPopover:!1,noResults:r.a.createElement(k.a,{disabled:!0,text:"No results."}),popoverProps:{minimal:!0,targetClassName:d.contactGroupMultiSelect},items:t,selectedItems:""===a?[]:a,onItemSelect:function(e){-1===a.indexOf(e.value)?c([].concat(Object(D.a)(a),[e.value])):(a.splice(a.indexOf(e.value),1),c(a))},tagInputProps:{placeholder:"Select contact groups...",fill:!0,className:d.contactGroupTagInputProps,onRemove:function(e,t){a&&a.length>0&&(a.splice(t,1),c(a))}},itemRenderer:function(e,t){var n=t.handleClick;return r.a.createElement(k.a,{active:-1!==a.indexOf(e.value),key:"option-".concat(e.value),text:e.text,onClick:n})},tagRenderer:function(e){return p[e].text}},m)))}),A=function(e){return void 0!==e&&null!==e&&""!==e},S=function(e){if(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)}return!0},L=function(e){return!e||new RegExp("^(?:(?:https?|ftp)://)(?:S+(?::S*)?@)?(?:(?!10(?:.d{1,3}){3})(?!127(?:.d{1,3}){3})(?!169.254(?:.d{1,3}){2})(?!192.168(?:.d{1,3}){2})(?!172.(?:1[6-9]|2d|3[0-1])(?:.d{1,3}){2})(?:[1-9]d?|1dd|2[01]d|22[0-3])(?:.(?:1?d{1,2}|2[0-4]d|25[0-5])){2}(?:.(?:[1-9]d?|1dd|2[0-4]d|25[0-4]))|(?:(?:[a-z\xa1-\uffff0-9]+-?)*[a-z\xa1-\uffff0-9]+)(?:.(?:[a-z\xa1-\uffff0-9]+-?)*[a-z\xa1-\uffff0-9]+)*(?:.(?:[a-z\xa1-\uffff]{2,})))(?::d{2,5})?(?:/[^s]*)?").test(e)},I=function(e,t){return e&&e.length>t};function M(e){var t={};return A(e.email)?S(e.email)||(t.email="Email format is incorrect"):t.email="Email is required",A(e.name)||(t.name="Name is Required"),L(e.imgUrl)||(t.imgUrl="Invalid url"),t}var R=n(26),P=n.n(R),_=n(39),z=Object(E.state)(null);var G={name:"snackbar",state:z,actions:{setMessage:function(e){Object(E.update)(z,function(){return e})},displayError:function(e){var t="Unknown error";e&&e.message?t=e.message:"string"===typeof e&&(t=e),Object(E.update)(z,function(){return t})},close:function(){Object(E.update)(z,function(){return null})}}},W=G.state,U=G.actions,B=n(15),H=n(75);H.initializeApp({apiKey:"AIzaSyB1GATIyuA6FNnAUMBz0kXJ62EvlSWx99o",authDomain:"redux-contacts-app.firebaseapp.com",databaseURL:"https://redux-contacts-app.firebaseio.com/"});var V=H,q="/groups";function $(){var e=V.database().ref("".concat(q));return new Promise(function(t,n){e.once("value",function(e){var n=e.val(),a=[];return Object.keys(n).map(function(e){return a.push(Object(B.a)({id:e},n[e]))}),t(a)},function(e){return n(e)})})}function J(e){var t=V.database().ref("".concat(q,"/").concat(e));return new Promise(function(n,a){t.once("value",function(t){var a=t.val();return a.id=e,n(a)},function(e){return a(e)})})}function K(e){var t=V.database().ref("".concat(q));return new Promise(function(n,a){var r=t.push();r.set(e,function(t){return t?a(t):n(Object(B.a)({id:r.key},e))})})}function Q(e){var t=e.id,n=Object(s.a)(e,["id"]),a=V.database().ref("".concat(q,"/").concat(t));return new Promise(function(e,r){a.set(Object(B.a)({},n),function(a){return a?r(a):e(Object(B.a)({id:t},n))})})}var X="/jony";function Y(){var e=V.database().ref("".concat(X));return new Promise(function(t,n){e.once("value",function(e){var n=e.val(),a=[];return Object.keys(n).map(function(e){return a.push(Object(B.a)({id:e},n[e]))}),t(a)},function(e){return n(e)})})}function Z(e){var t=V.database().ref("".concat(X,"/").concat(e));return new Promise(function(n,a){t.once("value",function(t){var a=t.val();return a&&(a.id=e),n(a)},function(e){return a(e)})})}function ee(e){var t=V.database().ref("".concat(X));return new Promise(function(n,a){var r=t.push();r.set(e,function(t){return t?a(t):n(Object(B.a)({id:r.key},e))})})}function te(e){var t=e.id,n=Object(s.a)(e,["id"]),a=V.database().ref("".concat(X,"/").concat(t));return new Promise(function(e,r){a.set(Object(B.a)({},n),function(a){return a?r(a):e(Object(B.a)({id:t},n))})})}function ne(e){var t=V.database().ref("".concat(X,"/").concat(e));return new Promise(function(n,a){t.set(null,function(t){return t?a(t):n({id:e})})})}var ae=n(61),re=n(94),ce=n(95),oe={HOME:"home",ADD_CONTACT:"addContact",LIST_CONTACTS:"listContacts",CONTACT_DETAILS:"contactDetails",ADD_GROUP:"addGroup",EDIT_CONTACT:"editContact"},ie=[{name:oe.HOME,path:"/"},{name:oe.ADD_CONTACT,path:"/add"},{name:oe.LIST_CONTACTS,path:"/list"},{name:oe.EDIT_CONTACT,path:"/edit/:id"},{name:oe.CONTACT_DETAILS,path:"/detail/:id"},{name:oe.ADD_GROUP,path:"/group/add"}];var se=function(){var e=Object(ae.b)(ie,{defaultRoute:"home",autoCleanup:!1});return e.usePlugin(re.a,Object(ce.a)({useHash:!0,forceDeactivate:!1})),e}();se.start();var ue=se.navigate,le=se;function de(e){return e.actions&&Object.values(e.actions).length>0&&Object.keys(e.actions).forEach(function(t){if(e.actions[t]&&"function"===typeof e.actions[t]&&!0!==e.actions[t].isSync){var n=e.actions[t];e.actions[t]=function(){var a=Object(_.a)(P.a.mark(function a(){var r,c,o,i,s=arguments;return P.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(console.groupCollapsed("[".concat(e.name,"] executing action: ").concat(t,"()")),r=s.length,c=new Array(r),o=0;o<r;o++)c[o]=s[o];return console.log("Using arguments: ".concat(c)),console.groupEnd(),ke.setLoading(!0,e.name),!0!==e.state.get().loading&&Object(E.update)(e.state,function(e){e.loading=!0}),a.next=9,n.apply(void 0,c);case 9:return i=a.sent,!1!==e.state.get().loading&&Object(E.update)(e.state,function(e){e.loading=!1}),ke.setLoading(!1,e.name),a.abrupt("return",i);case 14:case"end":return a.stop()}},a,this)}));return function(){return a.apply(this,arguments)}}()}}),e}var me=n(65),pe=n(72),fe=n(96),be=n.n(fe),ge=Object(E.state)({});var ve=n(32);function he(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n&&n.length>0)return n.forEach(function(t){var n=Object(a.useState)(t.state.get()),r=Object(ve.a)(n,2),c=r[0],o=r[1];e.push(c);var i=Object(a.useCallback)(function(){var e=t.state.get();e!==c&&o(e)});Object(a.useEffect)(function(){return t.state.on(i),function(){t.state.off(i)}})}),e;throw new Error("useState requires at least one argument.")}var Ee=de,Ce=function(e){if(e.actions&&"object"===typeof e.actions){var t=e.state.get();e.state.set(Object(B.a)({},t,{modified:!1})),e.actions.setModified=function(t){e.state.get().modified!==t&&Object(E.update)(e.state,function(e){e.modified=t})}}return e},Oe=function(e){if(e.actions&&"object"===typeof e.actions){var t=e.name||Symbol("state module name is not defined");ge.set(Object(B.a)({},ge.get(),Object(me.a)({},t,{changes:[]}))),e.state.on(function(){var n=e.state.get();Object(E.update)(ge,function(e){var a=e[t].changes[e[t].changes.length-1],r=a?Object(pe.original)(a).snapshot:void 0;e[t].changes.push({snapshot:n,updatedAt:Date.now()}),console.groupCollapsed("[".concat(t,"] state changed")),console.log("FROM:",r),console.log("TO:",n),console.log("DIFF:"),console.log(be.a.diffString(r,n)),console.groupEnd()})})}return e},xe=function(e){return e&&"object"===typeof e&&e.state&&"object"===typeof e.state&&(e.state.useState=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return n?he.apply(void 0,n):he(e)}),e},Fe="list",je="card",Te=Object(E.state)({loading:{state:!1,total:0,message:null},mode:Fe,menu:{left:!0,right:!0}});var ye={name:"global",state:Te,actions:{setLoading:function(e,t){Object(E.update)(Te,function(n){e?n.loading.total+=1:n.loading.total-=1,n.loading.state=n.loading.total>0,n.loading.message=t})},changeMode:function(e){e!==Fe&&e!==je||(Object(E.update)(Te,function(t){t.mode=e}),U.setMessage("Mode changed to: ".concat(e)))},toggleLeftMenu:function(){Object(E.update)(Te,function(e){e.menu.left=!e.menu.left})},setRightMenuVisibility:function(e){Object(E.update)(Te,function(t){t.menu.right=e})}}},De=ye.state,ke=ye.actions,we=Oe(ye),Ne={List:oe.LIST_CONTACTS,About:oe.HOME,"Add Contact":oe.ADD_CONTACT,"Add Group":oe.ADD_GROUP},Ae={transitionToEditContact:function(e){ke.setRightMenuVisibility(!0),ue(oe.EDIT_CONTACT,{id:e})},transitionToContactDetail:function(e){ke.setRightMenuVisibility(!0),ue(oe.CONTACT_DETAILS,{id:e})},transitionToMenuOption:function(e){return ue(Ne[e])}},Se={name:"history",history:{goBack:function(){return window.history.back()}},actions:Ae},Le=Se.history,Ie=Object(E.state)({list:{},groups:{},current:{}});function Me(e){return Re.apply(this,arguments)}function Re(){return(Re=Object(_.a)(P.a.mark(function e(t){var n,a,r,c;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:if(n=e.sent,a={},n.forEach(function(e){a[e.id]=e}),!t){e.next=12;break}return e.next=8,Z(t);case 8:e.t0=e.sent,r=[e.t0],e.next=15;break;case 12:return e.next=14,Y();case 14:r=e.sent;case 15:c={},r.forEach(function(e){e&&(e.groups&&e.groups.length>0&&(e.groupNames=e.groups.map(function(e){return a[e]?a[e].name:""}).join(", ")),c[e.id]=e)}),Object(E.update)(Ie,function(e){t?e.current=c[t]||{}:e.list=c,e.groups=a});case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Pe(){return(Pe=Object(_.a)(P.a.mark(function e(t){var n;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.id){e.next=7;break}return e.next=4,te(t);case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,ee(t);case 9:n=e.sent;case 10:console.log("current contact updated:",n),Object(E.update)(Ie,function(e){e.current=t,e.modified=!1}),U.setMessage("Contact ".concat(t.id?"updated":"created"," successfully")),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),U.displayError(e.t0);case 18:Le.goBack();case 19:case"end":return e.stop()}},e,this,[[0,15]])}))).apply(this,arguments)}function _e(){return(_e=Object(_.a)(P.a.mark(function e(t){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=7;break}return e.next=4,ne(t);case 4:Object(E.update)(Ie,function(e){e.current={}}),U.setMessage("Contact deleted successfully"),Me();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),U.displayError(e.t0);case 12:Le.goBack();case 13:case"end":return e.stop()}},e,this,[[0,9]])}))).apply(this,arguments)}var ze={name:"contacts",state:Ie,actions:{loadData:Me,saveContact:function(e){return Pe.apply(this,arguments)},deleteContact:function(e){return _e.apply(this,arguments)}},selectors:{contactList:function(e){return{current:e.current,groups:e.groups}}}},Ge=ze.actions,We=ze.state,Ue=ze.selectors,Be=xe(Oe(Ce(Ee(ze)))),He=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).state={alertIsOpen:!1},n.handleCancel=n.handleCancel.bind(Object(h.a)(Object(h.a)(n))),n.handleContinue=n.handleContinue.bind(Object(h.a)(Object(h.a)(n))),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.route.params.id,a=t.router;if(n&&Ge.loadData(n),a){var r=function(t){return function(t,n){return!We.get().modified||new Promise(function(t,n){e.setState({alertIsOpen:!0,continue:n,cancel:t})})}};a.canDeactivate(oe.ADD_CONTACT,r),a.canDeactivate(oe.EDIT_CONTACT,r)}}},{key:"componentWillReceiveProps",value:function(e){this.props.route.params.id!==e.route.params.id&&Ge.loadData(e.route.params.id)}},{key:"handleCancel",value:function(){this.state.continue(),this.setState({alertIsOpen:!1})}},{key:"handleContinue",value:function(){this.state.cancel(),this.setState({alertIsOpen:!1})}},{key:"render",value:function(){var e=this,t=this.state.alertIsOpen,n=this.props.classes;return r.a.createElement("div",null,r.a.createElement(O.a,{cancelButtonText:"Cancel",confirmButtonText:"Continue",icon:"trash",intent:"danger",isOpen:t,onCancel:this.handleCancel,onConfirm:this.handleContinue},r.a.createElement("p",null,"Are you sure you want leave? Your changes will be lost.")),r.a.createElement(E.Subscribe,{to:We,on:Ue.contactList},function(t){return r.a.createElement(C.b,{onSubmit:Ge.saveContact,validate:M,initialValues:e.props.route.params.id?t.current:{},render:function(e){var a=e.handleSubmit,c=e.pristine,o=e.invalid,i=e.submitting,s=e.reset;return r.a.createElement(l.a,{interactive:!0,elevation:d.a.TWO,className:n.formCard},r.a.createElement("form",{className:n.formContainer,onSubmit:a},r.a.createElement(C.c,{onChange:function(e){var t=e.dirty;Ge.setModified(t&&!i)}}),r.a.createElement(C.a,{name:"name",label:"Name",placeholder:"Name",component:y}),r.a.createElement(C.a,{name:"email",label:"Email",placeholder:"Email",component:y}),r.a.createElement(C.a,{name:"phoneNumber",label:"Phone number",placeholder:"Phone number",component:y}),r.a.createElement(C.a,{name:"imgUrl",label:"Profile image url",placeholder:"Profile image url",component:y}),r.a.createElement(C.a,{name:"groups",component:N,label:"Groups",options:Object.values(t.groups).map(function(e){return{value:e.id,text:e.name}})}),r.a.createElement("div",{className:n.buttonsContainer},r.a.createElement(x.b,{text:"Save contact",icon:"floppy-disk",intent:"success",type:"submit",disabled:c||i||o}),r.a.createElement(x.b,{text:"Reset values",disabled:c||i,icon:"refresh",intent:"danger",onClick:s}))))}})}))}}]),t}(a.Component),Ve=Object(u.a)({formCard:{width:"300px",margin:"0.5em 1em",padding:"1em"},formContainer:{paddingTop:"16px"},buttonsContainer:{display:"flex",justifyContent:"space-between"}})(He),qe=n(69),$e=n(22),Je=function(e){var t=e.contact,n=e.onEditClick,a=e.onDeleteClick,c=(e.big,e.loading),o=e.classes,i=t.name,s=t.imgUrl,u=t.email,m=t.groupNames,p=c?$e.a.SKELETON:"";return r.a.createElement(l.a,{interactive:!0,elevation:d.a.TWO,className:o.cardRoot},r.a.createElement("div",{className:o.cardContentContainer},r.a.createElement("h1",{className:o.cardHeader},r.a.createElement("span",{className:p},i||"...")),r.a.createElement("img",{alt:"contact",src:s||"http://i.imgur.com/mbZIBzc.png",className:o.cardImage})),r.a.createElement("div",{className:o.cardTextContainer},r.a.createElement("span",{className:p},u||"..."),r.a.createElement("br",null),r.a.createElement("span",{className:"".concat(o.cardTextGroup," ").concat(p)},m||"Without group")),r.a.createElement("div",{className:o.buttonContainer},r.a.createElement(x.b,{onClick:n,text:"Edit",className:o.button}),r.a.createElement(x.b,{onClick:a,text:"Delete",className:o.button})))};Je.defaultProps={big:!1,loading:!1};var Ke=Object(u.a)({cardRoot:function(e){return{width:e.big?"auto":"300px",padding:e.big?"inherit":"0px","& .bp3-card.bp3-interactive":{margin:"1em",padding:0}}},cardContentContainer:{position:"relative",textAlign:"center",height:300,width:300},cardHeader:{position:"absolute",bottom:"0px",right:"0px",left:"0px",padding:"8px",margin:"0",color:"white",background:"rgba(0, 0, 0, 0.54)"},cardImage:{maxHeight:300,maxWidth:300},cardTextContainer:{fontSize:"12pt",padding:"8px"},cardTextGroup:{fontSize:"10pt",color:"grey"},buttonContainer:{padding:"8px",position:"relative"},button:{marginRight:"8px"}})(Je),Qe=qe.b.div({hoverable:!0,init:{scale:1},hover:{scale:1.2}}),Xe=qe.b.div({enter:{opacity:1,transition:function(e){return{delay:50*e.i}}},exit:{opacity:0},props:{i:0}});function Ye(e){return e.list.map(function(e){return r.a.createElement(Ke,{key:"contact-".concat(e.id),contact:e,onEditClick:function(){return Ae.transitionToEditContact(e.id)},onDeleteClick:function(){return Ge.deleteContact(e.id)}})})}function Ze(e){var t=e.classes,n=e.route,a=e.list;return r.a.createElement(qe.a,null,a.map(function(e,a){return r.a.createElement(Xe,{key:"contact-".concat(e.id),id:e.id,i:a},r.a.createElement("div",{role:"presentation",onKeyPress:function(t){return"Enter"===t.key&&Ae.transitionToContactDetail(e.id)},onClick:function(){return Ae.transitionToContactDetail(e.id)},className:"bp3-tag bp3-interactive ".concat(t.contactListItem," ").concat(n.params.id===e.id?"selected":"")},r.a.createElement("div",{style:{display:"flex"}},e.imgUrl?r.a.createElement(Qe,null,r.a.createElement("img",{src:e.imgUrl,alt:e.name,className:t.contactListItemImage})):r.a.createElement(Qe,{className:t.contactListItemAvatar},e.name.substring(0,1).toUpperCase()),r.a.createElement("div",{className:t.contactListItemTextContainer},r.a.createElement("div",{className:t.contactListItemText1stLine},e.name),r.a.createElement("div",{className:t.contactListItemText2ndLine},e.groupNames||"Without group"))),r.a.createElement(Qe,null,r.a.createElement(x.b,{icon:"delete",onClick:function(t){Ge.deleteContact(e.id),t.stopPropagation()}}))))}))}var et=Object(u.a)({contactListItem:{"&.bp3-tag.bp3-interactive":{display:"flex",justifyContent:"space-between",height:"60px",paddingLeft:"8px",margin:"3px",backgroundColor:"#394b59",color:"white",boxShadow:"0 0 0 1px rgba(16, 22, 26, 0.2), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.4)"},"&.bp3-tag.bp3-interactive:hover":{background:"#202B33"},"&.bp3-tag.bp3-interactive.selected":{background:"#5C7080"}},contactListItemImage:{maxWidth:50,minWidth:50,maxHeight:50},contactListItemTextContainer:{display:"flex",flexDirection:"column",alignSelf:"center",marginLeft:"2rem"},contactListItemText1stLine:{fontWeight:"bolder"},contactListItemText2ndLine:{fontSize:"12px"},contactListItemAvatar:{width:"50px",height:"50px",fontSize:"35px",backgroundColor:"#182026",color:"white",textAlign:"center",lineHeight:"50px",borderRadius:"50px"},contactListRoot:{margin:"0.2em 0 0 0",display:"flex",flex:"1 0 auto",flexDirection:"row"},contactListItemsContainer:{display:"flex",flex:"1 0 auto",flexDirection:"column"},contactListCardsContainer:{flexWrap:"wrap"}})(function(e){Object(a.useEffect)(function(){Ge.loadData()},[]);var t=he(Be,we),n=Object(ve.a)(t,2),c=n[0],o=n[1],i=c.list;return r.a.createElement("div",{className:e.classes.contactListRoot},"list"===o.mode?r.a.createElement("div",{className:e.classes.contactListItemsContainer},r.a.createElement(Ze,Object.assign({},e,{list:Object.values(i)}))):r.a.createElement("div",{className:e.classes.contactListCardsContainer},r.a.createElement(Ye,Object.assign({},e,{list:Object.values(i)}))))}),tt=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).onEditClick=n.onEditClick.bind(Object(h.a)(Object(h.a)(n))),n.onDeleteClick=n.onDeleteClick.bind(Object(h.a)(Object(h.a)(n))),n.transitionToEditContact=Ae.transitionToEditContact,n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){Ge.loadData(this.props.route.params.id)}},{key:"componentDidUpdate",value:function(){Ge.loadData(this.props.route.params.id)}},{key:"onEditClick",value:function(){this.transitionToEditContact(this.props.route.params.id)}},{key:"onDeleteClick",value:function(){Ge.deleteContact(this.props.route.params.id)}},{key:"render",value:function(){var e=this;return r.a.createElement(E.Subscribe,{to:We},function(t){return r.a.createElement("div",{className:e.props.classes.contactDetailRoot},r.a.createElement(Ke,{big:!0,contact:t.current,loading:t.loading,onEditClick:e.onEditClick,onDeleteClick:e.onDeleteClick}))})}}]),t}(a.PureComponent),nt=Object(u.a)({contactDetailRoot:{margin:"0.5em 1em",width:"300px"}})(tt);function at(e){var t={};return A(e.name)?I(e.name,4)||(t.name="Name has to 4 o more characters"):t.name="Name is required",t}var rt=Object(E.state)({list:{},current:{}});function ct(){return(ct=Object(_.a)(P.a.mark(function e(t){var n;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,J(t);case 3:n=e.sent,Object(E.update)(rt,function(e){e.current=n}),e.next=11;break;case 7:return e.next=9,$();case 9:n=e.sent,Object(E.update)(rt,function(e){e.list=n});case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ot(){return(ot=Object(_.a)(P.a.mark(function e(t){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.id){e.next=7;break}return e.next=4,Q(t);case 4:U.setMessage("Group updated successfully"),e.next=10;break;case 7:return e.next=9,K(t);case 9:U.setMessage("Group created successfully");case 10:Object(E.update)(rt,function(e){e.current=t}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),U.displayError(e.t0);case 16:Le.goBack();case 17:case"end":return e.stop()}},e,this,[[0,13]])}))).apply(this,arguments)}var it={name:"groups",state:rt,actions:{loadData:function(e){return ct.apply(this,arguments)},saveGroup:function(e){return ot.apply(this,arguments)}}},st=it.state,ut=it.actions,lt=(de(it),function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.route.params.id;e&&ut.loadData(e)}},{key:"componentWillReceiveProps",value:function(e){this.props.route.params.id!==e.route.params.id&&ut.loadData(e.route.params.id)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(E.Subscribe,{to:st},function(t){return r.a.createElement(C.b,{onSubmit:ut.saveGroup,validate:at,initialValues:t.current,render:function(t){var n=t.handleSubmit,a=t.pristine,c=t.invalid,o=t.submitting,i=t.form.reset;return r.a.createElement(l.a,{interactive:!0,elevation:d.a.TWO,className:e.formCard},r.a.createElement("form",{className:e.formContainer,onSubmit:n},r.a.createElement(C.a,{name:"name",label:"Name",placeholder:"Name",component:y}),r.a.createElement("div",{className:e.buttonsContainer},r.a.createElement(x.b,{icon:"floppy-disk",intent:"success",type:"submit",disabled:a||o||c,text:"Save group"}),r.a.createElement(x.b,{icon:"refresh",intent:"danger",onClick:i,disabled:a||o,text:"Reset values"}))))}})})}}]),t}(a.Component)),dt=Object(u.a)({formCard:{width:"300px",margin:"0.5em 1em",padding:"1em"},formContainer:{paddingTop:"16px"},buttonsContainer:{display:"flex",justifyContent:"space-between"}})(lt),mt=n(66),pt={sidebar:{root:{position:"initial"},content:{display:"none"},overlay:{display:"none"},sidebar:{background:"#30404d",paddingTop:"3.5rem"}}},ft=window.matchMedia("(min-width: 800px)");var bt=Object(u.a)(pt)(function(e){var t=Object(a.useState)({isSmallScreen:!ft.matches,isOpen:!0}),n=Object(ve.a)(t,2),c=n[0],o=n[1];function i(){o(Object(B.a)({},c,{isSmallScreen:!ft.matches}))}function s(){var e=De.get().menu.right;e!==c.isOpen&&o(Object(B.a)({},c,{isOpen:e}))}Object(a.useEffect)(function(){return ft.addListener(i),De.on(s),function(){ft.removeListener(i),De.off(s)}});var u=c.isOpen;return c.isSmallScreen?r.a.createElement(mt.a,{open:u,pullRight:!0,touch:!0,styles:pt.sidebar,onSetOpen:function(e){ke.setRightMenuVisibility(e)},sidebar:r.a.createElement("div",null,r.a.createElement(x.b,{className:"bp3-minimal",icon:"cross",onClick:function(){return ke.setRightMenuVisibility(!1)}}),e.children)},r.a.createElement(x.b,{className:"bp3-minimal",icon:"menu",onClick:function(){return ke.setRightMenuVisibility(!u)}})):e.children});var gt=Object(u.a)({contactDetailsLayout:{display:"flex",flex:"1 0 auto"},editContactLayout:{display:"flex",flex:"1 0 auto"}})(function(e){var t=e.route,n=e.router,a=e.classes;if(!t)return r.a.createElement(m,{route:t});switch(t.name){case oe.ADD_GROUP:return r.a.createElement(dt,{route:t});case oe.CONTACT_DETAILS:return r.a.createElement("div",{className:a.contactDetailsLayout},r.a.createElement(et,{route:t}),r.a.createElement(bt,null,r.a.createElement(nt,{route:t})));case oe.LIST_CONTACTS:return r.a.createElement(et,{route:t});case oe.ADD_CONTACT:return r.a.createElement(Ve,{route:t,router:n});case oe.EDIT_CONTACT:return r.a.createElement("div",{className:a.editContactLayout},r.a.createElement(et,{route:t}),r.a.createElement(bt,null,r.a.createElement(Ve,{route:t,router:n})));case oe.HOME:default:return r.a.createElement(m,{route:t})}}),vt=n(190),ht=n(21),Et=n(179),Ct=n(181),Ot=n(18),xt=function(e){var t=e.changeListMode;return r.a.createElement(Et.a,{content:r.a.createElement(Ct.a,null,r.a.createElement(k.a,{text:"List",onClick:function(){return t("list")}}),r.a.createElement(k.a,{text:"Card",onClick:function(){return t("card")}})),position:Ot.a.RIGHT_TOP},r.a.createElement(x.b,{icon:"more"}))};var Ft=function(e){var t=e.route;return r.a.createElement(E.Subscribe,{to:De},function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(vt.a,null,r.a.createElement(vt.a.Group,{align:ht.a.LEFT},r.a.createElement(x.b,{className:"bp3-minimal",icon:"menu",onClick:ke.toggleLeftMenu}),r.a.createElement(vt.a.Divider,null),r.a.createElement(vt.a.Heading,null,"Contacts app")),r.a.createElement(vt.a.Group,{align:ht.a.RIGHT},t.name===oe.LIST_CONTACTS?r.a.createElement(xt,{changeListMode:ke.changeMode}):null)))})},jt=n(187),Tt=n(180),yt=n(188);var Dt=function(){return r.a.createElement(E.Subscribe,{to:De},function(e){return r.a.createElement(jt.a,{position:Ot.a.TOP},e.loading.state?r.a.createElement(Tt.a,{message:r.a.createElement("div",null,r.a.createElement("span",null,"Loading ".concat(e.loading.message,"...")),r.a.createElement(yt.a,null))}):null)})};var kt=function(){return r.a.createElement(E.Subscribe,{to:W},function(e){return r.a.createElement(jt.a,{position:Ot.a.BOTTOM},e?r.a.createElement(Tt.a,{message:e||"",timeout:3e3,onDismiss:U.close}):null)})},wt={sidebar:{sidebar:{background:"#30404d"}},leftMenuRoot:{paddingTop:"4rem","&.selected":{background:"#5C7080"}}};function Nt(e){Ae.transitionToMenuOption(e.target.textContent)}var At=window.matchMedia("(min-width: 800px)"),St=Object(u.a)(wt)(function(e){var t=e.route,n=e.smallScreen,a=e.classes;return r.a.createElement(Ct.a,{className:a.leftMenuRoot},r.a.createElement(k.a,{active:t.name===oe.HOME,onClick:function(e){Nt(e),n&&ke.toggleLeftMenu()},text:"About"}),r.a.createElement(k.a,{active:-1!==[oe.LIST_CONTACTS,oe.CONTACT_DETAILS,oe.EDIT_CONTACT].indexOf(t.name),onClick:function(e){Nt(e),n&&ke.toggleLeftMenu()},text:"List"}),r.a.createElement(k.a,{active:t.name===oe.ADD_CONTACT,onClick:function(e){Nt(e),n&&ke.toggleLeftMenu()},text:"Add Contact"}),r.a.createElement(k.a,{active:t.name===oe.ADD_GROUP,onClick:function(e){Nt(e),n&&ke.toggleLeftMenu()},text:"Add Group"}))});var Lt=function(e){var t=Object(a.useState)(!At.matches),n=Object(ve.a)(t,2),c=n[0],o=n[1];function i(){o(!At.matches)}return Object(a.useEffect)(function(){return At.addListener(i),function(){At.removeListener(i)}}),r.a.createElement(E.Subscribe,{to:De,on:function(e){return e.menu.left}},function(t){return t?c?r.a.createElement(mt.a,{open:t,styles:wt.sidebar,onSetOpen:ke.toggleLeftMenu,sidebar:r.a.createElement(St,Object.assign({smallScreen:c},e))},!1):r.a.createElement(St,Object.assign({smallScreen:c},e)):null})};var It=function(e){var t=e.router,n=Object(s.a)(e,["router"]);return r.a.createElement("div",{className:"bp3-fill",style:{backgroundColor:"#30404d",minHeight:"100vh"}},r.a.createElement(i.a,{router:t},function(e){var t=e.route;return r.a.createElement(Ft,{route:t})}),r.a.createElement(Dt,null),r.a.createElement(i.a,{router:t},function(e){var a=e.route;return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Lt,{route:a}),r.a.createElement(gt,Object.assign({route:a,router:t},n)))}),r.a.createElement(kt,null))},Mt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Rt(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(function(){return r.a.createElement(i.b,{router:le},r.a.createElement(It,{router:le}))},null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/ContactsAppRematch",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/ContactsAppRematch","/service-worker.js");Mt?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Rt(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Rt(e)})}}()}},[[101,2,1]]]);
//# sourceMappingURL=main.e5f96305.chunk.js.map