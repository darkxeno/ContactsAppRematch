(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){e.exports=a(180)},108:function(e,t,a){},180:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),o=a.n(c),i=a(51),s=(a(108),a(83)),l=a(14),u=a(186),d=a(33);var m=Object(l.a)({cardRoot:{margin:"1em"},cardText1stLine:{fontSize:"14px"},cardText2ndLine:{paddingTop:"16px",fontSize:"14px",paddingBottom:"2em"}})(function(e){var t=e.classes;return r.a.createElement(u.a,{interactive:!0,elevation:d.a.TWO,className:t.cardRoot},r.a.createElement("h1",null,"Contacts App"),r.a.createElement("div",{className:t.cardText1stLine},"Learning Immer (Bey)"),r.a.createElement("div",{className:t.cardText2ndLine},"This is a example app using immer and react context + hooks."))}),p=a(6),f=a(36),g=a(47),b=a(42),v=a(187),h=a(188);function E(e){var t=e.input,a=e.label,n=e.placeholder,c=e.meta,o=c.touched,i=c.error,s=Object(b.a)(e,["input","label","placeholder","meta"]);return r.a.createElement(v.a,{helperText:i,label:a,intent:o&&i?"danger":void 0},r.a.createElement(h.a,Object.assign({placeholder:n,intent:o&&i?"danger":void 0},t,s)))}E.defaultProps={custom:{}};var C=E,x=a(96),O=a(135),T=a(191);var y=Object(l.a)({contactGroupMultiSelect:{"&.bp3-popover-target":{width:"100%"}},contactGroupTagInputProps:{"& .bp3-input-ghost":{fontSize:"14px"}}})(function(e){var t=e.options,a=e.input,n=a.value,c=a.onChange,o=e.label,i=e.meta,s=i.touched,l=i.error,u=e.classes,d=Object(b.a)(e,["options","input","label","meta","classes"]),m={};return t&&t.length>0&&t.forEach(function(e){m[e.value]=e}),r.a.createElement(v.a,{helperText:l,label:o,intent:s&&l?"danger":void 0},r.a.createElement(T.a,Object.assign({shouldDismissPopover:!1,noResults:r.a.createElement(O.a,{disabled:!0,text:"No results."}),popoverProps:{minimal:!0,targetClassName:u.contactGroupMultiSelect},items:t,selectedItems:""===n?[]:n,onItemSelect:function(e){-1===n.indexOf(e.value)?c([].concat(Object(x.a)(n),[e.value])):(n.splice(n.indexOf(e.value),1),c(n))},tagInputProps:{placeholder:"Select contact groups...",fill:!0,className:u.contactGroupTagInputProps,onRemove:function(e,t){n&&n.length>0&&(n.splice(t,1),c(n))}},itemRenderer:function(e,t){var a=t.handleClick;return r.a.createElement(O.a,{active:-1!==n.indexOf(e.value),key:"option-".concat(e.value),text:e.text,onClick:a})},tagRenderer:function(e){return m[e].text}},d)))}),j=a(38),F=a(193),N=a(53),D=a(90),w=a(91),k={HOME:"home",ADD_CONTACT:"addContact",LIST_CONTACTS:"listContacts",CONTACT_DETAILS:"contactDetails",ADD_GROUP:"addGroup",EDIT_CONTACT:"editContact"},S=[{name:k.HOME,path:"/"},{name:k.ADD_CONTACT,path:"/add"},{name:k.LIST_CONTACTS,path:"/list"},{name:k.EDIT_CONTACT,path:"/edit/:id"},{name:k.CONTACT_DETAILS,path:"/detail/:id"},{name:k.ADD_GROUP,path:"/group/add"}];var L=function(){var e=Object(N.b)(S,{defaultRoute:"home",autoCleanup:!1});return e.usePlugin(D.a,Object(w.a)({useHash:!0,forceDeactivate:!1})),e}();L.start();var A=L.navigate,I=L,M=a(15),P=a.n(M),R=a(35),_=Object(p.state)(null);var z={name:"snackbar",state:_,actions:{setMessage:function(e){Object(p.update)(_,function(){return e})},displayError:function(e){var t="Unknown error";e&&e.message?t=e.message:"string"===typeof e&&(t=e),Object(p.update)(_,function(){return t})},close:function(){Object(p.update)(_,function(){return null})}}},G=z.state,U=z.actions;function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{localLoading:!1};return e.actions&&Object.values(e.actions).length>0&&Object.keys(e.actions).forEach(function(a){if(e.actions[a]&&"function"===typeof e.actions[a]&&!0!==e.actions[a].isSync){var n=e.actions[a];e.actions[a]=function(){var r=Object(R.a)(P.a.mark(function r(){var c,o,i,s,l=arguments;return P.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:for(console.groupCollapsed("[".concat(e.name,"] executing action: ").concat(a,"()")),c=l.length,o=new Array(c),i=0;i<c;i++)o[i]=l[i];return console.log("Using arguments: ".concat(o)),console.groupEnd(),se.setLoading(!0,e.name),t.localLoading&&!0!==e.state.get().loading&&Object(p.update)(e.state,function(e){e.loading=!0}),r.next=8,n.apply(void 0,o);case 8:return s=r.sent,t.localLoading&&!1!==e.state.get().loading&&Object(p.update)(e.state,function(e){e.loading=!1}),se.setLoading(!1,e.name),r.abrupt("return",s);case 12:case"end":return r.stop()}},r,this)}));return function(){return r.apply(this,arguments)}}()}}),e}var W=a(18);var B=a(46),V=a(66),J=a(59),q=Object(p.state)({});var K=a(92),$=a.n(K);function X(e,t,a,n,r,c,o){r.changes.push({oldState:t,newPartialState:a,moduleName:n});var i=[];i.push(setTimeout(function(){if(r.changes.length>0){var a=Object(W.a)({},r.oldState),n="";r.changes.forEach(function(e,t){n+=e.moduleName+(t!==r.changes.length-1?" + ":""),a=Object(W.a)({},a,Object(B.a)({},e.moduleName,e.newPartialState))}),function(e,t,a,n,r,c,o){if(console.groupCollapsed("[".concat(n,"] rendering [").concat(r,"] changes from ").concat(c," at: ").concat((new Date).getMilliseconds())),console.log("NEW STATE: ",a),console.log(Object(J.diffString)(t,a)),console.groupEnd(),o>0)return e(a)}(e,t,a,n,r.changes.length,c,o),r.oldState=a,r.changes=[],i.forEach(function(e){return clearTimeout(e)}),i=[]}},0))}function Q(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};if(t&&"object"===typeof t&&Object.keys(t).length>0){var c=Object.keys(t);c.forEach(function(e){var n=t[e],c=n.state.get(),o=a[e];r=Object(W.a)({},r,Object(B.a)({},n.name,o?o(c):c))});var o=Object(i.b)(r,e),s=Object(j.a)(o,2),l=s[0],u=s[1],d={oldState:l,newState:{},changes:[]},m=0;return c.forEach(function(r){var c=t[r],o=a[r],i=function(){var t=c.state.get(),a=o?o(t):t;$()(a,l[c.name])||X(u,l,a,c.name,d,e,m)};Object(n.useEffect)(function(){return m+=1,c.state.on(i),function(){m-=1,c.state.off(i)}})}),l}throw new Error("useMultipleStates requires at least 2 arguments: componentName (string), stateModules (object) indexed by key.")}r.a.createElement(i.a);var Y=H,Z=function(e){if(e.actions&&"object"===typeof e.actions){var t=e.state.get();e.state.set(Object(W.a)({},t,{modified:!1})),e.actions.setModified=function(t){e.state.get().modified!==t&&Object(p.update)(e.state,function(e){e.modified=t})}}return e},ee=function(e){if(e.actions&&"object"===typeof e.actions){var t=e.name||Symbol("state module name is not defined");q.set(Object(W.a)({},q.get(),Object(B.a)({},t,{changes:[]}))),e.state.on(function(){var a=e.state.get();Object(p.update)(q,function(e){var n=e[t].changes[e[t].changes.length-1],r=n?Object(V.original)(n).snapshot:void 0;e[t].changes.push({snapshot:a,updatedAt:Date.now()}),console.groupCollapsed("[".concat(t,"] state changed at: ").concat((new Date).getMilliseconds())),console.log("FROM:",r),console.log("TO:",a),console.log("DIFF:"),console.log(Object(J.diffString)(r,a)),console.groupEnd()})})}return e},te=function(e){return e&&"object"===typeof e&&e.state&&"object"===typeof e.state&&(e.state.useState=function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return a?Q.apply(void 0,a):Q(e)}),e},ae="list",ne="card",re="table",ce=window.matchMedia("(min-width: 800px)"),oe=Object(p.state)({loading:{state:!1,total:0,message:null},mode:re,menu:{left:!0,right:!0},isSmallScreen:!ce.matches});ce.addListener(function(){Object(p.update)(oe,function(e){e.isSmallScreen=!ce.matches})});var ie={name:"global",state:oe,actions:{setLoading:function(e,t){Object(p.update)(oe,function(a){e?a.loading.total+=1:a.loading.total-=1,a.loading.state=a.loading.total>0,a.loading.message=t})},changeMode:function(e){e!==ae&&e!==ne&&e!==re||(Object(p.update)(oe,function(t){t.mode=e}),U.setMessage("Mode changed to: ".concat(e)))},toggleLeftMenu:function(){Object(p.update)(oe,function(e){e.menu.left=!e.menu.left})},setRightMenuVisibility:function(e){Object(p.update)(oe,function(t){t.menu.right=e})}},selectors:{loader:function(e){return{loading:{state:e.loading.state,message:e.loading.message}}},drawerMenu:function(e){return{isOpen:e.menu.right,isSmallScreen:e.isSmallScreen}},leftMenu:function(e){return{isOpen:e.menu.left,isSmallScreen:e.isSmallScreen}}}},se=ie.actions,le=ie.selectors,ue=ee(ie),de=a(69);de.initializeApp({apiKey:"AIzaSyB1GATIyuA6FNnAUMBz0kXJ62EvlSWx99o",authDomain:"redux-contacts-app.firebaseapp.com",databaseURL:"https://redux-contacts-app.firebaseio.com/"});var me=de,pe="/groups";function fe(){var e=me.database().ref("".concat(pe));return new Promise(function(t,a){e.once("value",function(e){var a=e.val(),n=[];return Object.keys(a).map(function(e){return n.push(Object(W.a)({id:e},a[e]))}),t(n)},function(e){return a(e)})})}function ge(e){var t=me.database().ref("".concat(pe,"/").concat(e));return new Promise(function(a,n){t.once("value",function(t){var n=t.val();return n.id=e,a(n)},function(e){return n(e)})})}function be(e){var t=me.database().ref("".concat(pe));return new Promise(function(a,n){var r=t.push();r.set(e,function(t){return t?n(t):a(Object(W.a)({id:r.key},e))})})}function ve(e){var t=e.id,a=Object(b.a)(e,["id"]),n=me.database().ref("".concat(pe,"/").concat(t));return new Promise(function(e,r){n.set(Object(W.a)({},a),function(n){return n?r(n):e(Object(W.a)({id:t},a))})})}var he="/jony";function Ee(){var e=me.database().ref("".concat(he));return new Promise(function(t,a){e.once("value",function(e){var a=e.val(),n=[];return Object.keys(a).map(function(e){return n.push(Object(W.a)({id:e},a[e]))}),t(n)},function(e){return a(e)})})}function Ce(e){var t=me.database().ref("".concat(he,"/").concat(e));return new Promise(function(a,n){t.once("value",function(t){var n=t.val();return n&&(n.id=e),a(n)},function(e){return n(e)})})}function xe(e){var t=me.database().ref("".concat(he));return new Promise(function(a,n){var r=t.push();r.set(e,function(t){return t?n(t):a(Object(W.a)({id:r.key},e))})})}function Oe(e){var t=e.id,a=Object(b.a)(e,["id"]),n=me.database().ref("".concat(he,"/").concat(t));return new Promise(function(e,r){n.set(Object(W.a)({},a),function(n){return n?r(n):e(Object(W.a)({id:t},a))})})}function Te(e){var t=me.database().ref("".concat(he,"/").concat(e));return new Promise(function(a,n){t.set(null,function(t){return t?n(t):a({id:e})})})}var ye=Object(p.state)({list:{},groups:{},current:{}});function je(){return(je=Object(R.a)(P.a.mark(function e(){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0===Object.values(ye.get().list).length&&Fe();case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Fe(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(R.a)(P.a.mark(function e(t){var a,n,r,c;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe();case 2:if(a=e.sent,n={},a.forEach(function(e){n[e.id]=e}),!t){e.next=12;break}return e.next=8,Ce(t);case 8:e.t0=e.sent,r=[e.t0],e.next=15;break;case 12:return e.next=14,Ee();case 14:r=e.sent;case 15:c={},r.forEach(function(e){e&&(e.groups&&e.groups.length>0&&(e.groupNames=e.groups.map(function(e){return n[e]?n[e].name:""}).join(", ")),c[e.id]=e)}),Object(p.update)(ye,function(e){t?e.current=c[t]||{}:e.list=c,e.groups=n});case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function De(){return(De=Object(R.a)(P.a.mark(function e(t){var a;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.id){e.next=7;break}return e.next=4,Oe(t);case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,xe(t);case 9:a=e.sent;case 10:console.log("current contact updated:",a),Object(p.update)(ye,function(e){e.current=t,e.modified=!1}),U.setMessage("Contact ".concat(t.id?"updated":"created"," successfully")),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),U.displayError(e.t0);case 18:Re.transitionToContactList();case 19:case"end":return e.stop()}},e,this,[[0,15]])}))).apply(this,arguments)}function we(){return(we=Object(R.a)(P.a.mark(function e(t){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=7;break}return e.next=4,Te(t);case 4:Object(p.update)(ye,function(e){e.current={}}),U.setMessage("Contact deleted successfully"),Fe();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),U.displayError(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}))).apply(this,arguments)}var ke={name:"contacts",state:ye,actions:{loadData:Fe,loadContactsIfEmpty:function(){return je.apply(this,arguments)},saveContact:function(e){return De.apply(this,arguments)},deleteContact:function(e){return we.apply(this,arguments)}},selectors:{contactForm:function(e){return{current:e.current,groups:e.groups}},contactList:function(e){return{current:e.current,list:e.list,groups:e.groups}},contactListGlobal:function(e){return{mode:e.mode}},contactDetail:function(e){return{current:e.current,loading:e.loading}}}},Se=ke.actions,Le=ke.state,Ae=ke.selectors,Ie=te(ee(Z(Y(ke,{localLoading:!0})))),Me={List:k.LIST_CONTACTS,About:k.HOME,"Add Contact":k.ADD_CONTACT,"Add Group":k.ADD_GROUP},Pe={transitionToContactList:function(){var e=Object(R.a)(P.a.mark(function e(){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.loadData();case 2:A(k.LIST_CONTACTS);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),transitionToEditContact:function(){var e=Object(R.a)(P.a.mark(function e(t){var a;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,e.next=3,[Se.loadData(a),Se.loadContactsIfEmpty()];case 3:se.setRightMenuVisibility(!0),A(k.EDIT_CONTACT,{id:a});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),transitionToContactDetail:function(){var e=Object(R.a)(P.a.mark(function e(t){var a;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,e.next=3,[Se.loadData(a),Se.loadContactsIfEmpty()];case 3:se.setRightMenuVisibility(!0),A(k.CONTACT_DETAILS,{id:a});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),transitionToMenuOption:function(e){Pe[Me[e]]?Pe[Me[e]]():A(Me[e])},goBack:function(){return window.history.back()},router:{canDeactivate:I.canDeactivate}};Pe[k.EDIT_CONTACT]=Pe.transitionToEditContact,Pe[k.CONTACT_DETAILS]=Pe.transitionToContactDetail,Pe[k.LIST_CONTACTS]=Pe.transitionToContactList;var Re=Pe,_e=I.getState(),ze=_e.name,Ge=_e.params;Re[ze]&&Re[ze](Ge);var Ue=Object(p.state)({route:_e,previousRoute:{}}),He={name:"history",state:Ue,actions:Re};I.subscribe(function(e){Object(p.update)(Ue,function(t){t.route=e.route,t.previousRoute=e.previousRoute})});var We=He.actions,Be=He;var Ve=function(e){var t=e.isModified,a=e.routesToBlock,c=e.children,o=Object(n.useState)({alertIsOpen:!1}),i=Object(j.a)(o,2),s=i[0],l=i[1],u=Object(n.useCallback)(function(){s.continue(),l({alertIsOpen:!1})}),d=Object(n.useCallback)(function(){s.cancel(),l({alertIsOpen:!1})});Object(n.useEffect)(function(){if(We.router){var e=function(e){return function(e,a){return!t()||new Promise(function(e,t){l({alertIsOpen:!0,continue:t,cancel:e})})}};a.forEach(function(t){We.router.canDeactivate(t,e)})}});var m=s.alertIsOpen;return r.a.createElement("div",null,r.a.createElement(F.a,{cancelButtonText:"Cancel",confirmButtonText:"Continue",icon:"trash",intent:"danger",isOpen:m,onCancel:u,onConfirm:d},r.a.createElement("p",null,"Are you sure you want leave? Your changes will be lost.")),c)},Je=function(e){return void 0!==e&&null!==e&&""!==e},qe=function(e){if(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)}return!0},Ke=function(e){return!e||new RegExp("^(?:(?:https?|ftp)://)(?:S+(?::S*)?@)?(?:(?!10(?:.d{1,3}){3})(?!127(?:.d{1,3}){3})(?!169.254(?:.d{1,3}){2})(?!192.168(?:.d{1,3}){2})(?!172.(?:1[6-9]|2d|3[0-1])(?:.d{1,3}){2})(?:[1-9]d?|1dd|2[01]d|22[0-3])(?:.(?:1?d{1,2}|2[0-4]d|25[0-5])){2}(?:.(?:[1-9]d?|1dd|2[0-4]d|25[0-4]))|(?:(?:[a-z\xa1-\uffff0-9]+-?)*[a-z\xa1-\uffff0-9]+)(?:.(?:[a-z\xa1-\uffff0-9]+-?)*[a-z\xa1-\uffff0-9]+)*(?:.(?:[a-z\xa1-\uffff]{2,})))(?::d{2,5})?(?:/[^s]*)?").test(e)},$e=function(e,t){return e&&e.length>t};function Xe(e){var t={};return Je(e.email)?qe(e.email)||(t.email="Email format is incorrect"):t.email="Email is required",Je(e.name)||(t.name="Name is Required"),Ke(e.imgUrl)||(t.imgUrl="Invalid url"),t}var Qe=Object(l.a)({formCard:{width:"300px",margin:"0.5em 1em",padding:"1em"},formContainer:{paddingTop:"16px"},buttonsContainer:{display:"flex",justifyContent:"space-between"}})(function(e){var t=e.classes,a=e.route,c=Object(n.useCallback)(function(){return Le.get().modified});return r.a.createElement(Ve,{isModified:c,routesToBlock:[k.ADD_CONTACT,k.EDIT_CONTACT]},r.a.createElement(p.Subscribe,{to:Le,on:Ae.contactForm},function(e){return r.a.createElement(f.b,{onSubmit:Se.saveContact,validate:Xe,initialValues:a.params.id?e.current:{},render:function(a){var n=a.handleSubmit,c=a.pristine,o=a.invalid,i=a.submitting,s=a.reset;return r.a.createElement(u.a,{interactive:!0,elevation:d.a.TWO,className:t.formCard},r.a.createElement("form",{className:t.formContainer,onSubmit:n},r.a.createElement(f.c,{onChange:function(e){var t=e.dirty;Se.setModified(t&&!i)}}),r.a.createElement(f.a,{name:"name",label:"Name",placeholder:"Name",component:C}),r.a.createElement(f.a,{name:"email",label:"Email",placeholder:"Email",component:C}),r.a.createElement(f.a,{name:"phoneNumber",label:"Phone number",placeholder:"Phone number",component:C}),r.a.createElement(f.a,{name:"imgUrl",label:"Profile image url",placeholder:"Profile image url",component:C}),r.a.createElement(f.a,{name:"groups",component:y,label:"Groups",options:Object.values(e.groups).map(function(e){return{value:e.id,text:e.name}})}),r.a.createElement("div",{className:t.buttonsContainer},r.a.createElement(g.b,{text:"Save contact",icon:"floppy-disk",intent:"success",type:"submit",disabled:c||i||o}),r.a.createElement(g.b,{text:"Reset values",disabled:c||i,icon:"refresh",intent:"danger",onClick:s}))))}})}))}),Ye=a(63),Ze=a(44),et=function(e){var t=e.contact,a=e.onEditClick,n=e.onDeleteClick,c=(e.big,e.loading),o=e.classes,i=t.name,s=t.imgUrl,l=t.email,m=t.groupNames,p=c?Ze.a.SKELETON:"";return r.a.createElement(u.a,{interactive:!0,elevation:d.a.TWO,className:o.cardRoot},r.a.createElement("div",{className:o.cardContentContainer},r.a.createElement("h1",{className:o.cardHeader},r.a.createElement("span",{className:p},i||"...")),r.a.createElement("img",{alt:"contact",src:i?s||"http://i.imgur.com/mbZIBzc.png":"http://cdn.osxdaily.com/wp-content/uploads/2013/09/deleted-contacts.jpg",className:o.cardImage})),r.a.createElement("div",{className:o.cardTextContainer},r.a.createElement("span",{className:p},l||"..."),r.a.createElement("br",null),r.a.createElement("span",{className:"".concat(o.cardTextGroup," ").concat(p)},m||"Without group")),r.a.createElement("div",{className:o.buttonContainer},r.a.createElement(g.b,{onClick:a,text:"Edit",className:o.button}),r.a.createElement(g.b,{onClick:n,text:"Delete",className:o.button})))};et.defaultProps={big:!1,loading:!1};var tt=Object(l.a)({cardRoot:function(e){return{width:e.big?"auto":"300px",padding:e.big?"inherit":"0px","& .bp3-card.bp3-interactive":{margin:"1em",padding:0}}},cardContentContainer:{position:"relative",textAlign:"center",height:300,width:300},cardHeader:{position:"absolute",bottom:"0px",right:"0px",left:"0px",padding:"8px",margin:"0",color:"white",background:"rgba(0, 0, 0, 0.54)"},cardImage:{maxHeight:300,maxWidth:300},cardTextContainer:{fontSize:"12pt",padding:"8px"},cardTextGroup:{fontSize:"10pt",color:"grey"},buttonContainer:{padding:"8px",position:"relative"},button:{marginRight:"8px"}})(et),at=a(8),nt=a(145),rt=a(70);var ct=function(e){var t=e.filter,a=e.onChange,n=e.column;return r.a.createElement("input",{className:Ze.a.INPUT,type:"text",style:{width:"100%"},placeholder:n.Placeholder,value:t?t.value:"",onChange:function(e){return a(e.target.value)}})};var ot=function(e){return r.a.createElement("button",Object.assign({type:"button"},e,{className:Ze.a.BUTTON}),r.a.createElement(at.a,{icon:e.icon}))};var it=Object(l.a)({pagination:{"&.-pagination":{justifyContent:"flex-end"}}})(function(e){var t=e.onPageChange,a=e.pages,c=e.page,o=e.showPageSizeOptions,i=e.pageSizeOptions,s=e.pageSize,l=e.showPageJump,u=e.canPrevious,d=e.canNext,m=e.onPageSizeChange,p=e.className,f=e.pageJumpText,g=e.nextText,b=e.pageText,v=e.previousText,h=e.style,E=e.rowsSelectorText,C=e.rowsText,x=e.ofText,O=e.classes,T=Object(n.useState)({page:c}),y=Object(j.a)(T,2),F=y[0],N=y[1],D=Object(n.useCallback)(function(e){var t=e;return Number.isNaN(e)&&(t=c),Math.min(Math.max(t,0),a-1)}),w=Object(n.useCallback)(function(e){var a=D(e);N({safePage:a}),c!==a&&t(a)}),k=Object(n.useCallback)(function(e){e&&e.preventDefault(),w(""===c?c:F.page)});return r.a.createElement("div",{className:"".concat(p||""," -pagination ").concat(O.pagination),style:h},r.a.createElement("span",{className:"-pageInfo"},b," ",l?r.a.createElement("div",{className:"-pageJump"},r.a.createElement("input",{"aria-label":f,type:""===F.page?"text":"number",onChange:function(e){var t=e.target.value;return N(""===t?{page:t}:{page:D(t-1)})},value:""===F.page?"":F.page+1,onBlur:k,onKeyPress:function(e){13!==e.which&&13!==e.keyCode||k()}})):r.a.createElement("span",{className:"-currentPage"},c+1)," ".concat(x," "),r.a.createElement("span",{className:"-totalPages"},a||1)),o&&r.a.createElement("span",{className:"select-wrap -pageSizeOptions"},r.a.createElement("select",{"aria-label":E,onChange:function(e){return m(Number(e.target.value))},value:s},i.map(function(e,t){return r.a.createElement("option",{key:t,value:e},"".concat(e," ").concat(C))}))),r.a.createElement("div",{className:"pagination-buttons"},r.a.createElement(ot,{icon:"double-chevron-left",onClick:function(){u&&w(0)},disabled:!u}),r.a.createElement(ot,{icon:"chevron-left",onClick:function(){u&&w(c-1)},disabled:!u},v),r.a.createElement(ot,{icon:"chevron-right",onClick:function(){d&&w(c+1)},disabled:!d}),r.a.createElement(ot,{icon:"double-chevron-right",onClick:function(){d&&w(a-1)},disabled:!d},g)))});Object.assign(rt.a,{FilterComponent:ct,PaginationComponent:it});var st=Object(l.a)({table:{"& .rt-th.rt-resizable-header":{paddingTop:"0.5em",overflow:"hidden"},"& .groups":{display:"flex",justifyContent:"space-evenly"},"& .select-wrap select":{backgroundColor:"rgba(16, 22, 26, 0.3)",color:"white"}}})(function(e){var t=e.classes,a=e.data,n=e.columns;return r.a.createElement(rt.b,{data:a,filterable:!0,showPageJump:!1,defaultFilterMethod:function(e,t){return-1!==String(t[e.id]).toLowerCase().indexOf(e.value.toLowerCase())},columns:n,className:"-striped -highlight ".concat(t.table)})}),lt=[{Header:"Name",accessor:"name",Placeholder:"Search by name..."},{Header:"Email",accessor:"email",Placeholder:"Search by email...",Cell:function(e){return r.a.createElement("span",{className:"email"},r.a.createElement(at.a,{icon:"envelope"}),"  ".concat(e.value))}},{Header:"Phone Number",accessor:"phoneNumber",Placeholder:"Search by phone number...",Cell:function(e){return!!e.value&&r.a.createElement("span",{className:"phoneNumber"},r.a.createElement(at.a,{icon:"phone"}),"  ".concat(e.value))}},{Header:"Groups",accessor:"groupNames",Placeholder:"Search by group...",Cell:function(e){return r.a.createElement("span",{className:"groups"},!!e.value&&e.value.split(",").map(function(e){return r.a.createElement(nt.a,{key:e},r.a.createElement(at.a,{icon:"people"}),e)}))}}];var ut=function(e){var t=e.list;return r.a.createElement(st,{data:t,filterable:!0,columns:lt})},dt=Ye.b.div({hoverable:!0,init:{scale:1},hover:{scale:1.2}}),mt=Ye.b.div({enter:{opacity:1,transition:function(e){return{delay:50*e.i}}},exit:{opacity:0},props:{i:0}});function pt(e){return e.list.map(function(e){return r.a.createElement(tt,{key:"contact-".concat(e.id),contact:e,onEditClick:function(){return We.transitionToEditContact({id:e.id})},onDeleteClick:function(){return Se.deleteContact(e.id)}})})}function ft(e){var t=e.classes,a=e.list,n=e.route;return r.a.createElement(Ye.a,null,a.map(function(e,a){return r.a.createElement(mt,{key:"contact-".concat(e.id),id:e.id,i:a},r.a.createElement("div",{role:"presentation",onKeyPress:function(t){return"Enter"===t.key&&We.transitionToContactDetail({id:e.id})},onClick:function(){return We.transitionToContactDetail({id:e.id})},className:"bp3-tag bp3-interactive ".concat(t.contactListItem," ").concat(n.params.id===e.id?"selected":"")},r.a.createElement("div",{style:{display:"flex"}},e.imgUrl?r.a.createElement(dt,null,r.a.createElement("img",{src:e.imgUrl,alt:e.name,className:t.contactListItemImage})):r.a.createElement(dt,{className:t.contactListItemAvatar},e.name.substring(0,1).toUpperCase()),r.a.createElement("div",{className:t.contactListItemTextContainer},r.a.createElement("div",{className:t.contactListItemText1stLine},e.name),r.a.createElement("div",{className:t.contactListItemText2ndLine},e.groupNames||"Without group"))),r.a.createElement(dt,null,r.a.createElement(g.b,{icon:"delete",onClick:function(t){Se.deleteContact(e.id),t.stopPropagation()}}))))}))}var gt=r.a.memo(function(e){var t=Q("ContactList",{contacts:Ie,global:ue},{contacts:Ae.contactList,global:Ae.contactListGlobal}),a=t.contacts,c=t.global,o=Object(n.useCallback)(function(){switch(c.mode){case"list":return r.a.createElement("div",{className:e.classes.contactListItemsContainer},r.a.createElement(ft,Object.assign({},e,{list:Object.values(a.list)})));case"card":return r.a.createElement("div",{className:e.classes.contactListCardsContainer},r.a.createElement(pt,Object.assign({},e,{list:Object.values(a.list)})));default:return r.a.createElement("div",{className:e.classes.contactListItemsContainer},r.a.createElement(ut,Object.assign({},e,{list:Object.values(a.list)})))}});return r.a.createElement("div",{className:e.classes.contactListRoot},o())}),bt=Object(l.a)({contactListItem:{"&.bp3-tag.bp3-interactive":{display:"flex",justifyContent:"space-between",height:"60px",paddingLeft:"8px",margin:"3px",backgroundColor:"#394b59",color:"white",boxShadow:"0 0 0 1px rgba(16, 22, 26, 0.2), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.4)"},"&.bp3-tag.bp3-interactive:hover":{background:"#202B33"},"&.bp3-tag.bp3-interactive.selected":{background:"#5C7080"}},contactListItemImage:{maxWidth:50,minWidth:50,maxHeight:50},contactListItemTextContainer:{display:"flex",flexDirection:"column",alignSelf:"center",marginLeft:"2rem"},contactListItemText1stLine:{fontWeight:"bolder"},contactListItemText2ndLine:{fontSize:"12px"},contactListItemAvatar:{width:"50px",height:"50px",fontSize:"35px",backgroundColor:"#182026",color:"white",textAlign:"center",lineHeight:"50px",borderRadius:"50px"},contactListRoot:{display:"flex",flex:"1 0 auto",flexDirection:"row"},contactListItemsContainer:{display:"flex",flex:"1 0 auto",flexDirection:"column"},contactListCardsContainer:{flexWrap:"wrap"}})(gt);var vt=Object(l.a)({contactDetailRoot:{margin:"0.5em 1em",width:"300px"}})(function(e){var t=Q("ContactDetail",{contacts:Ie},{contacts:Ae.contactDetail}).contacts;return r.a.createElement("div",{className:e.classes.contactDetailRoot},r.a.createElement(tt,{big:!0,contact:t.current,loading:t.loading,onEditClick:function(){return We.transitionToEditContact(e.route.params)},onDeleteClick:function(){return Se.deleteContact(e.route.params.id)}}))}),ht=a(93),Et=a(94),Ct=a(97),xt=a(95),Ot=a(98);function Tt(e){var t={};return Je(e.name)?$e(e.name,4)||(t.name="Name has to 4 o more characters"):t.name="Name is required",t}var yt=Object(p.state)({list:{},current:{}});function jt(){return(jt=Object(R.a)(P.a.mark(function e(t){var a;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,ge(t);case 3:a=e.sent,Object(p.update)(yt,function(e){e.current=a}),e.next=11;break;case 7:return e.next=9,fe();case 9:a=e.sent,Object(p.update)(yt,function(e){e.list=a});case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ft(){return(Ft=Object(R.a)(P.a.mark(function e(t){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.id){e.next=7;break}return e.next=4,ve(t);case 4:U.setMessage("Group updated successfully"),e.next=10;break;case 7:return e.next=9,be(t);case 9:U.setMessage("Group created successfully");case 10:Object(p.update)(yt,function(e){e.current=t}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),U.displayError(e.t0);case 16:We.goBack();case 17:case"end":return e.stop()}},e,this,[[0,13]])}))).apply(this,arguments)}var Nt={name:"groups",state:yt,actions:{loadData:function(e){return jt.apply(this,arguments)},saveGroup:function(e){return Ft.apply(this,arguments)}}},Dt=Nt.state,wt=Nt.actions,kt=(H(Nt),function(e){function t(){return Object(ht.a)(this,t),Object(Ct.a)(this,Object(xt.a)(t).apply(this,arguments))}return Object(Ot.a)(t,e),Object(Et.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.route.params.id;e&&wt.loadData(e)}},{key:"componentWillReceiveProps",value:function(e){this.props.route.params.id!==e.route.params.id&&wt.loadData(e.route.params.id)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(p.Subscribe,{to:Dt},function(t){return r.a.createElement(f.b,{onSubmit:wt.saveGroup,validate:Tt,initialValues:t.current,render:function(t){var a=t.handleSubmit,n=t.pristine,c=t.invalid,o=t.submitting,i=t.form.reset;return r.a.createElement(u.a,{interactive:!0,elevation:d.a.TWO,className:e.formCard},r.a.createElement("form",{className:e.formContainer,onSubmit:a},r.a.createElement(f.a,{name:"name",label:"Name",placeholder:"Name",component:C}),r.a.createElement("div",{className:e.buttonsContainer},r.a.createElement(g.b,{icon:"floppy-disk",intent:"success",type:"submit",disabled:n||o||c,text:"Save group"}),r.a.createElement(g.b,{icon:"refresh",intent:"danger",onClick:i,disabled:n||o,text:"Reset values"}))))}})})}}]),t}(n.Component)),St=Object(l.a)({formCard:{width:"300px",margin:"0.5em 1em",padding:"1em"},formContainer:{paddingTop:"16px"},buttonsContainer:{display:"flex",justifyContent:"space-between"}})(kt),Lt=a(60),At={sidebar:{root:{position:"initial"},content:{display:"none"},overlay:{display:"none"},sidebar:{background:"#30404d",paddingTop:"3.5rem"}}};var It=Object(l.a)(At)(function(e){var t=Q("DrawerMenu",{global:ue},{global:le.drawerMenu}).global,a=t.isOpen;return t.isSmallScreen?r.a.createElement(Lt.a,{open:a,pullRight:!0,touch:!0,styles:At.sidebar,onSetOpen:function(e){se.setRightMenuVisibility(e)},sidebar:r.a.createElement("div",null,r.a.createElement(g.b,{className:"bp3-minimal",icon:"cross",onClick:function(){return se.setRightMenuVisibility(!1)}}),e.children)},r.a.createElement(g.b,{className:"bp3-minimal",icon:"menu",onClick:function(){return se.setRightMenuVisibility(!a)}})):e.children});var Mt=Object(l.a)({contactDetailsLayout:{display:"flex",flex:"1 0 auto"},editContactLayout:{display:"flex",flex:"1 0 auto"}})(function(e){var t=e.route,a=e.classes;if(!t)return r.a.createElement(m,{route:t});switch(t.name){case k.ADD_GROUP:return r.a.createElement(St,{route:t});case k.CONTACT_DETAILS:return r.a.createElement("div",{className:a.contactDetailsLayout},r.a.createElement(bt,{route:t}),r.a.createElement(It,null,r.a.createElement(vt,{route:t})));case k.LIST_CONTACTS:return r.a.createElement(bt,{route:t});case k.ADD_CONTACT:return r.a.createElement(Qe,{route:t});case k.EDIT_CONTACT:return r.a.createElement("div",{className:a.editContactLayout},r.a.createElement(bt,{route:t}),r.a.createElement(It,null,r.a.createElement(Qe,{route:t})));case k.HOME:default:return r.a.createElement(m,{route:t})}}),Pt=a(192),Rt=a(34),_t=a(181),zt=a(183),Gt=a(32),Ut=function(e){var t=e.changeListMode;return r.a.createElement(_t.a,{content:r.a.createElement(zt.a,null,r.a.createElement(O.a,{text:"List",onClick:function(){return t("list")}}),r.a.createElement(O.a,{text:"Card",onClick:function(){return t("card")}}),r.a.createElement(O.a,{text:"Table",onClick:function(){return t("table")}})),position:Gt.a.RIGHT_TOP},r.a.createElement(g.b,{icon:"more"}))};var Ht=function(e){var t=e.route;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pt.a,null,r.a.createElement(Pt.a.Group,{align:Rt.a.LEFT},r.a.createElement(g.b,{className:"bp3-minimal",icon:"menu",onClick:se.toggleLeftMenu}),r.a.createElement(Pt.a.Divider,null),r.a.createElement(Pt.a.Heading,null,"Contacts app")),r.a.createElement(Pt.a.Group,{align:Rt.a.RIGHT},t.name===k.LIST_CONTACTS?r.a.createElement(Ut,{changeListMode:se.changeMode}):null)))},Wt=a(189),Bt=a(182),Vt=a(190);var Jt=function(){var e=Q("Loader",{global:ue},{global:le.loader}).global;return r.a.createElement(Wt.a,{position:Gt.a.TOP},e.loading.state?r.a.createElement(Bt.a,{message:r.a.createElement("div",null,r.a.createElement("span",null,"Loading ".concat(e.loading.message,"...")),r.a.createElement(Vt.a,null))}):null)};var qt=function(){return r.a.createElement(p.Subscribe,{to:G},function(e){return r.a.createElement(Wt.a,{position:Gt.a.BOTTOM},e?r.a.createElement(Bt.a,{message:e||"",timeout:3e3,onDismiss:U.close}):null)})},Kt={sidebar:{sidebar:{background:"#30404d"}},leftMenuRoot:{paddingTop:"4rem","&.selected":{background:"#5C7080"}}};var $t=Object(l.a)(Kt)(function(e){var t=e.route,a=e.smallScreen,n=e.classes;function c(e){!function(e){We.transitionToMenuOption(e.target.textContent)}(e),a&&se.toggleLeftMenu()}return r.a.createElement(zt.a,{className:n.leftMenuRoot},r.a.createElement(O.a,{active:t.name===k.HOME,onClick:c,text:"About"}),r.a.createElement(O.a,{active:-1!==[k.LIST_CONTACTS,k.CONTACT_DETAILS,k.EDIT_CONTACT].indexOf(t.name),onClick:c,text:"List"}),r.a.createElement(O.a,{active:t.name===k.ADD_CONTACT,onClick:c,text:"Add Contact"}),r.a.createElement(O.a,{active:t.name===k.ADD_GROUP,onClick:c,text:"Add Group"}))});var Xt=function(e){var t=Q("LeftMenu",{global:ue},{global:le.leftMenu}).global,a=t.isOpen,n=t.isSmallScreen;return!!a&&(n?r.a.createElement(Lt.a,{open:a,styles:Kt.sidebar,onSetOpen:se.toggleLeftMenu,sidebar:r.a.createElement($t,Object.assign({smallScreen:n},e))},!1):r.a.createElement($t,Object.assign({smallScreen:n},e)))};var Qt,Yt=function(e){var t=Object(s.a)({},e),a=Q("App",{history:Be}).history.route;return r.a.createElement("div",{className:"bp3-fill",style:{backgroundColor:"#30404d",minHeight:"100vh"}},r.a.createElement(Ht,{route:a}),r.a.createElement(Jt,null),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Xt,{route:a}),r.a.createElement(Mt,Object.assign({route:a},t))),r.a.createElement(qt,null))},Zt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ea(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}Qt=window.__REDUX_DEVTOOLS_EXTENSION__?function(){return r.a.createElement(i.a,null,r.a.createElement(Yt,null))}:function(){return r.a.createElement(Yt,null)},o.a.render(r.a.createElement(Qt,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/ContactsAppRematch",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/ContactsAppRematch","/service-worker.js");Zt?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ea(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ea(e)})}}()}},[[102,2,1]]]);
//# sourceMappingURL=main.e19c4412.chunk.js.map