(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{141:function(e,t,a){e.exports=a(303)},147:function(e,t,a){},303:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),o=a.n(c),i=a(52),l=(a(147),a(119)),s=a(12),u=a(309),d=a(30);var m=Object(s.a)({cardRoot:{margin:"1em"},cardText1stLine:{fontSize:"14px"},cardText2ndLine:{paddingTop:"16px",fontSize:"14px",paddingBottom:"2em"}})(function(e){var t=e.classes;return r.a.createElement(u.a,{interactive:!0,elevation:d.a.TWO,className:t.cardRoot},r.a.createElement("h1",null,"Contacts App"),r.a.createElement("div",{className:t.cardText1stLine},"Learning Immer (Bey)"),r.a.createElement("div",{className:t.cardText2ndLine},"This is a example app using immer and react context + hooks."))}),p=a(9),f=a(31),g=a(82),b=a(41),v=a(310),h=a(311);function E(e){var t=e.input,a=e.label,n=e.placeholder,c=e.meta,o=c.touched,i=c.error,l=Object(b.a)(e,["input","label","placeholder","meta"]);return r.a.createElement(v.a,{helperText:i,label:a,intent:o&&i?"danger":void 0},r.a.createElement(h.a,Object.assign({placeholder:n,intent:o&&i?"danger":void 0},t,l)))}E.defaultProps={custom:{}};var C=E,O=a(135),x=a(122),T=a(314);var j=Object(s.a)({contactGroupMultiSelect:{"&.bp3-popover-target":{width:"100%"}},contactGroupTagInputProps:{"& .bp3-input-ghost":{fontSize:"14px"}}})(function(e){var t=e.options,a=e.input,n=a.value,c=a.onChange,o=e.label,i=e.meta,l=i.touched,s=i.error,u=e.classes,d=Object(b.a)(e,["options","input","label","meta","classes"]),m={};return t&&t.length>0&&t.forEach(function(e){m[e.value]=e}),r.a.createElement(v.a,{helperText:s,label:o,intent:l&&s?"danger":void 0},r.a.createElement(T.a,Object.assign({shouldDismissPopover:!1,noResults:r.a.createElement(x.a,{disabled:!0,text:"No results."}),popoverProps:{minimal:!0,targetClassName:u.contactGroupMultiSelect},items:t,selectedItems:""===n?[]:n,onItemSelect:function(e){-1===n.indexOf(e.value)?c([].concat(Object(O.a)(n),[e.value])):(n.splice(n.indexOf(e.value),1),c(n))},tagInputProps:{placeholder:"Select contact groups...",fill:!0,className:u.contactGroupTagInputProps,onRemove:function(e,t){n&&n.length>0&&(n.splice(t,1),c(n))}},itemRenderer:function(e,t){var a=t.handleClick;return r.a.createElement(x.a,{active:-1!==n.indexOf(e.value),key:"option-".concat(e.value),text:e.text,onClick:a})},tagRenderer:function(e){return m[e].text}},d)))}),y=a(29),F=a(316),D=a(58),N=a(127),w=a(128),k={HOME:"home",ADD_CONTACT:"addContact",LIST_CONTACTS:"listContacts",CONTACT_DETAILS:"contactDetails",ADD_GROUP:"addGroup",EDIT_CONTACT:"editContact"},S=[{name:k.HOME,path:"/"},{name:k.ADD_CONTACT,path:"/add"},{name:k.LIST_CONTACTS,path:"/list"},{name:k.EDIT_CONTACT,path:"/edit/:id"},{name:k.CONTACT_DETAILS,path:"/detail/:id"},{name:k.ADD_GROUP,path:"/group/add"}];var A=function(){var e=Object(D.b)(S,{defaultRoute:"home",autoCleanup:!1});return e.usePlugin(N.a,Object(w.a)({useHash:!0,forceDeactivate:!1})),e}();A.start();var L=A.navigate,I=A,P=a(14),M=a.n(P),R=a(26),_=Object(p.state)(null);var z={name:"snackbar",state:_,actions:{setMessage:function(e){Object(p.update)(_,function(){return e})},displayError:function(e){var t="Unknown error";e&&e.message?t=e.message:"string"===typeof e&&(t=e),Object(p.update)(_,function(){return t})},close:function(){Object(p.update)(_,function(){return null})}}},G=z.state,H=z.actions;function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{localLoading:!1};return e.actions&&Object.values(e.actions).length>0&&Object.keys(e.actions).forEach(function(a){if(e.actions[a]&&"function"===typeof e.actions[a]&&!0!==e.actions[a].isSync){var n=e.actions[a];e.actions[a]=function(){var r=Object(R.a)(M.a.mark(function r(){var c,o,i,l,s=arguments;return M.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:for(console.groupCollapsed("[".concat(e.name,"] executing action: ").concat(a,"()")),c=s.length,o=new Array(c),i=0;i<c;i++)o[i]=s[i];return console.log("Using arguments: ".concat(o)),console.groupEnd(),le.setLoading(!0,e.name),t.localLoading&&!0!==e.state.get().loading&&Object(p.update)(e.state,function(e){e.loading=!0}),r.next=8,n.apply(void 0,o);case 8:return l=r.sent,t.localLoading&&!1!==e.state.get().loading&&Object(p.update)(e.state,function(e){e.loading=!1}),le.setLoading(!1,e.name),r.abrupt("return",l);case 12:case"end":return r.stop()}},r,this)}));return function(){return r.apply(this,arguments)}}()}}),e}var W=a(13);var B=a(36),V=a(83),J=a(71),q=Object(p.state)({});var K=a(129),$=a.n(K);function X(e,t,a,n,r,c,o){r.changes.push({oldState:t,newPartialState:a,moduleName:n});var i=[];i.push(setTimeout(function(){if(r.changes.length>0){var a=Object(W.a)({},r.oldState),n="";r.changes.forEach(function(e,t){n+=e.moduleName+(t!==r.changes.length-1?" + ":""),a=Object(W.a)({},a,Object(B.a)({},e.moduleName,e.newPartialState))}),function(e,t,a,n,r,c,o){if(console.groupCollapsed("[".concat(n,"] rendering [").concat(r,"] changes from ").concat(c," at: ").concat((new Date).getMilliseconds())),console.log("NEW STATE: ",a),console.log(Object(J.diffString)(t,a)),console.groupEnd(),o>0)return e(a)}(e,t,a,n,r.changes.length,c,o),r.oldState=a,r.changes=[],i.forEach(function(e){return clearTimeout(e)}),i=[]}},0))}function Y(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};if(t&&"object"===typeof t&&Object.keys(t).length>0){var c=Object.keys(t);c.forEach(function(e){var n=t[e],c=n.state.get(),o=a[e];r=Object(W.a)({},r,Object(B.a)({},n.name,o?o(c):c))});var o=Object(i.b)(r,e),l=Object(y.a)(o,2),s=l[0],u=l[1],d={oldState:s,newState:{},changes:[]},m=0;return c.forEach(function(r){var c=t[r],o=a[r],i=function(){var t=c.state.get(),a=o?o(t):t;$()(a,s[c.name])||X(u,s,a,c.name,d,e,m)};Object(n.useEffect)(function(){return m+=1,c.state.on(i),function(){m-=1,c.state.off(i)}})}),s}throw new Error("useMultipleStates requires at least 2 arguments: componentName (string), stateModules (object) indexed by key.")}r.a.createElement(i.a);var Q=U,Z=function(e){if(e.actions&&"object"===typeof e.actions){var t=e.state.get();e.state.set(Object(W.a)({},t,{modified:!1})),e.actions.setModified=function(t){e.state.get().modified!==t&&Object(p.update)(e.state,function(e){e.modified=t})}}return e},ee=function(e){if(e.actions&&"object"===typeof e.actions){var t=e.name||Symbol("state module name is not defined");q.set(Object(W.a)({},q.get(),Object(B.a)({},t,{changes:[]}))),e.state.on(function(){var a=e.state.get();Object(p.update)(q,function(e){var n=e[t].changes[e[t].changes.length-1],r=n?Object(V.original)(n).snapshot:void 0;e[t].changes.push({snapshot:a,updatedAt:Date.now()}),console.groupCollapsed("[".concat(t,"] state changed at: ").concat((new Date).getMilliseconds())),console.log("FROM:",r),console.log("TO:",a),console.log("DIFF:"),console.log(Object(J.diffString)(r,a)),console.groupEnd()})})}return e},te=function(e){return e&&"object"===typeof e&&e.state&&"object"===typeof e.state&&(e.state.useState=function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return a?Y.apply(void 0,a):Y(e)}),e},ae="list",ne="card",re="table",ce=window.matchMedia("(min-width: 800px)"),oe=Object(p.state)({loading:{state:!1,total:0,message:null},mode:re,menu:{left:!0,right:!0},isSmallScreen:!ce.matches});ce.addListener(function(){Object(p.update)(oe,function(e){e.isSmallScreen=!ce.matches})});var ie={name:"global",state:oe,actions:{setLoading:function(e,t){Object(p.update)(oe,function(a){e?a.loading.total+=1:a.loading.total-=1,a.loading.state=a.loading.total>0,a.loading.message=t})},changeMode:function(e){e!==ae&&e!==ne&&e!==re||(Object(p.update)(oe,function(t){t.mode=e}),H.setMessage("Mode changed to: ".concat(e)))},toggleLeftMenu:function(){Object(p.update)(oe,function(e){e.menu.left=!e.menu.left})},setRightMenuVisibility:function(e){Object(p.update)(oe,function(t){t.menu.right=e})}},selectors:{loader:function(e){return{loading:{state:e.loading.state,message:e.loading.message}}},drawerMenu:function(e){return{isOpen:e.menu.right,isSmallScreen:e.isSmallScreen}},leftMenu:function(e){return{isOpen:e.menu.left,isSmallScreen:e.isSmallScreen}}}},le=ie.actions,se=ie.selectors,ue=ee(ie),de=a(86);de.initializeApp({apiKey:"AIzaSyB1GATIyuA6FNnAUMBz0kXJ62EvlSWx99o",authDomain:"redux-contacts-app.firebaseapp.com",databaseURL:"https://redux-contacts-app.firebaseio.com/"});var me=de,pe="/groups";function fe(){var e=me.database().ref("".concat(pe));return new Promise(function(t,a){e.once("value",function(e){var a=e.val(),n=[];return Object.keys(a).map(function(e){return n.push(Object(W.a)({id:e},a[e]))}),t(n)},function(e){return a(e)})})}function ge(e){var t=me.database().ref("".concat(pe,"/").concat(e));return new Promise(function(a,n){t.once("value",function(t){var n=t.val();return n.id=e,a(n)},function(e){return n(e)})})}function be(e){var t=me.database().ref("".concat(pe));return new Promise(function(a,n){var r=t.push();r.set(e,function(t){return t?n(t):a(Object(W.a)({id:r.key},e))})})}function ve(e){var t=e.id,a=Object(b.a)(e,["id"]),n=me.database().ref("".concat(pe,"/").concat(t));return new Promise(function(e,r){n.set(Object(W.a)({},a),function(n){return n?r(n):e(Object(W.a)({id:t},a))})})}var he="/jony";function Ee(){var e=me.database().ref("".concat(he));return new Promise(function(t,a){e.once("value",function(e){var a=e.val(),n=[];return Object.keys(a).map(function(e){return n.push(Object(W.a)({id:e},a[e]))}),t(n)},function(e){return a(e)})})}function Ce(e){var t=me.database().ref("".concat(he,"/").concat(e));return new Promise(function(a,n){t.once("value",function(t){var n=t.val();return n&&(n.id=e),a(n)},function(e){return n(e)})})}function Oe(e){var t=me.database().ref("".concat(he));return new Promise(function(a,n){var r=t.push();r.set(e,function(t){return t?n(t):a(Object(W.a)({id:r.key},e))})})}function xe(e){var t=e.id,a=Object(b.a)(e,["id"]),n=me.database().ref("".concat(he,"/").concat(t));return new Promise(function(e,r){n.set(Object(W.a)({},a),function(n){return n?r(n):e(Object(W.a)({id:t},a))})})}function Te(e){var t=me.database().ref("".concat(he,"/").concat(e));return new Promise(function(a,n){t.set(null,function(t){return t?n(t):a({id:e})})})}var je=Object(p.state)({list:{},groups:{},current:{}});function ye(){return(ye=Object(R.a)(M.a.mark(function e(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0===Object.values(je.get().list).length&&Fe();case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Fe(e){return De.apply(this,arguments)}function De(){return(De=Object(R.a)(M.a.mark(function e(t){var a,n,r,c;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe();case 2:if(a=e.sent,n={},a.forEach(function(e){n[e.id]=e}),!t){e.next=12;break}return e.next=8,Ce(t);case 8:e.t0=e.sent,r=[e.t0],e.next=15;break;case 12:return e.next=14,Ee();case 14:r=e.sent;case 15:c={},r.forEach(function(e){e&&(e.groups&&e.groups.length>0&&(e.groupNames=e.groups.map(function(e){return n[e]?n[e].name:""}).join(", ")),c[e.id]=e)}),Object(p.update)(je,function(e){t?e.current=c[t]||{}:e.list=c,e.groups=n});case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ne(){return(Ne=Object(R.a)(M.a.mark(function e(t){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.id){e.next=7;break}return e.next=4,xe(t);case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,Oe(t);case 9:a=e.sent;case 10:console.log("current contact updated:",a),Object(p.update)(je,function(e){e.current=t,e.modified=!1}),H.setMessage("Contact ".concat(t.id?"updated":"created"," successfully")),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),H.displayError(e.t0);case 18:Re.transitionToContactList();case 19:case"end":return e.stop()}},e,this,[[0,15]])}))).apply(this,arguments)}function we(){return(we=Object(R.a)(M.a.mark(function e(t){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=7;break}return e.next=4,Te(t);case 4:Object(p.update)(je,function(e){e.current={}}),H.setMessage("Contact deleted successfully"),Fe();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),H.displayError(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}))).apply(this,arguments)}var ke={name:"contacts",state:je,actions:{loadData:Fe,loadContactsIfEmpty:function(){return ye.apply(this,arguments)},saveContact:function(e){return Ne.apply(this,arguments)},deleteContact:function(e){return we.apply(this,arguments)}},selectors:{contactForm:function(e){return{current:e.current,groups:e.groups}},contactList:function(e){return{current:e.current,list:e.list,groups:e.groups}},contactListGlobal:function(e){return{mode:e.mode}},contactDetail:function(e){return{current:e.current,loading:e.loading}}}},Se=ke.actions,Ae=ke.state,Le=ke.selectors,Ie=te(ee(Z(Q(ke,{localLoading:!0})))),Pe={List:k.LIST_CONTACTS,About:k.HOME,"Add Contact":k.ADD_CONTACT,"Add Group":k.ADD_GROUP},Me={transitionToContactList:function(){var e=Object(R.a)(M.a.mark(function e(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.loadData();case 2:L(k.LIST_CONTACTS);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),transitionToEditContact:function(){var e=Object(R.a)(M.a.mark(function e(t){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,e.next=3,[Se.loadData(a),Se.loadContactsIfEmpty()];case 3:le.setRightMenuVisibility(!0),L(k.EDIT_CONTACT,{id:a});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),transitionToContactDetail:function(){var e=Object(R.a)(M.a.mark(function e(t){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,e.next=3,[Se.loadData(a),Se.loadContactsIfEmpty()];case 3:le.setRightMenuVisibility(!0),L(k.CONTACT_DETAILS,{id:a});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),transitionToMenuOption:function(e){Me[Pe[e]]?Me[Pe[e]]():L(Pe[e])},goBack:function(){return window.history.back()},router:{canDeactivate:I.canDeactivate}};Me[k.EDIT_CONTACT]=Me.transitionToEditContact,Me[k.CONTACT_DETAILS]=Me.transitionToContactDetail,Me[k.LIST_CONTACTS]=Me.transitionToContactList;var Re=Me,_e=I.getState(),ze=_e.name,Ge=_e.params;Re[ze]&&Re[ze](Ge);var He=Object(p.state)({route:_e,previousRoute:{}}),Ue={name:"history",state:He,actions:Re};I.subscribe(function(e){Object(p.update)(He,function(t){t.route=e.route,t.previousRoute=e.previousRoute})});var We=Ue.actions,Be=Ue;var Ve=function(e){var t=e.isModified,a=e.routesToBlock,c=e.children,o=Object(n.useState)({alertIsOpen:!1}),i=Object(y.a)(o,2),l=i[0],s=i[1],u=Object(n.useCallback)(function(){l.continue(),s({alertIsOpen:!1})}),d=Object(n.useCallback)(function(){l.cancel(),s({alertIsOpen:!1})});Object(n.useEffect)(function(){if(We.router){var e=function(e){return function(e,a){return!t()||new Promise(function(e,t){s({alertIsOpen:!0,continue:t,cancel:e})})}};a.forEach(function(t){We.router.canDeactivate(t,e)})}});var m=l.alertIsOpen;return r.a.createElement("div",null,r.a.createElement(F.a,{cancelButtonText:"Cancel",confirmButtonText:"Continue",icon:"trash",intent:"danger",isOpen:m,onCancel:u,onConfirm:d},r.a.createElement("p",null,"Are you sure you want leave? Your changes will be lost.")),c)},Je=function(e){return void 0!==e&&null!==e&&""!==e},qe=function(e){if(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)}return!0},Ke=function(e){return!e||new RegExp("^(?:(?:https?|ftp)://)(?:S+(?::S*)?@)?(?:(?!10(?:.d{1,3}){3})(?!127(?:.d{1,3}){3})(?!169.254(?:.d{1,3}){2})(?!192.168(?:.d{1,3}){2})(?!172.(?:1[6-9]|2d|3[0-1])(?:.d{1,3}){2})(?:[1-9]d?|1dd|2[01]d|22[0-3])(?:.(?:1?d{1,2}|2[0-4]d|25[0-5])){2}(?:.(?:[1-9]d?|1dd|2[0-4]d|25[0-4]))|(?:(?:[a-z\xa1-\uffff0-9]+-?)*[a-z\xa1-\uffff0-9]+)(?:.(?:[a-z\xa1-\uffff0-9]+-?)*[a-z\xa1-\uffff0-9]+)*(?:.(?:[a-z\xa1-\uffff]{2,})))(?::d{2,5})?(?:/[^s]*)?").test(e)},$e=function(e,t){return e&&e.length>t};function Xe(e){var t={};return Je(e.email)?qe(e.email)||(t.email="Email format is incorrect"):t.email="Email is required",Je(e.name)||(t.name="Name is Required"),Ke(e.imgUrl)||(t.imgUrl="Invalid url"),t}var Ye=Object(s.a)({formCard:{width:"300px",margin:"0.5em 1em",padding:"1em"},formContainer:{paddingTop:"16px"},buttonsContainer:{display:"flex",justifyContent:"space-between"}})(function(e){var t=e.classes,a=e.route,c=Object(n.useCallback)(function(){return Ae.get().modified});return r.a.createElement(Ve,{isModified:c,routesToBlock:[k.ADD_CONTACT,k.EDIT_CONTACT]},r.a.createElement(p.Subscribe,{to:Ae,on:Le.contactForm},function(e){return r.a.createElement(f.b,{onSubmit:Se.saveContact,validate:Xe,initialValues:a.params.id?e.current:{},render:function(a){var n=a.handleSubmit,c=a.pristine,o=a.invalid,i=a.submitting,l=a.reset;return r.a.createElement(u.a,{interactive:!0,elevation:d.a.TWO,className:t.formCard},r.a.createElement("form",{className:t.formContainer,onSubmit:n},r.a.createElement(f.c,{onChange:function(e){var t=e.dirty;Se.setModified(t&&!i)}}),r.a.createElement(f.a,{name:"name",label:"Name",placeholder:"Name",component:C}),r.a.createElement(f.a,{name:"email",label:"Email",placeholder:"Email",component:C}),r.a.createElement(f.a,{name:"phoneNumber",label:"Phone number",placeholder:"Phone number",component:C}),r.a.createElement(f.a,{name:"imgUrl",label:"Profile image url",placeholder:"Profile image url",component:C}),r.a.createElement(f.a,{name:"groups",component:j,label:"Groups",options:Object.values(e.groups).map(function(e){return{value:e.id,text:e.name}})}),r.a.createElement("div",{className:t.buttonsContainer},r.a.createElement(g.b,{text:"Save contact",icon:"floppy-disk",intent:"success",type:"submit",disabled:c||i||o}),r.a.createElement(g.b,{text:"Reset values",disabled:c||i,icon:"refresh",intent:"danger",onClick:l}))))}})}))}),Qe=a(51),Ze=a(47),et=function(e){var t=e.contact,a=e.onEditClick,n=e.onDeleteClick,c=(e.big,e.loading),o=e.classes,i=t.name,l=t.imgUrl,s=t.email,m=t.groupNames,p=c?Ze.a.SKELETON:"";return r.a.createElement(u.a,{interactive:!0,elevation:d.a.TWO,className:o.cardRoot},r.a.createElement("div",{className:o.cardContentContainer},r.a.createElement("h1",{className:o.cardHeader},r.a.createElement("span",{className:p},i||"...")),r.a.createElement("img",{alt:"contact",src:i?l||"http://i.imgur.com/mbZIBzc.png":"http://cdn.osxdaily.com/wp-content/uploads/2013/09/deleted-contacts.jpg",className:o.cardImage})),r.a.createElement("div",{className:o.cardTextContainer},r.a.createElement("span",{className:p},s||"..."),r.a.createElement("br",null),r.a.createElement("span",{className:"".concat(o.cardTextGroup," ").concat(p)},m||"Without group")),r.a.createElement("div",{className:o.buttonContainer},r.a.createElement(g.b,{onClick:a,text:"Edit",className:o.button}),r.a.createElement(g.b,{onClick:n,text:"Delete",className:o.button})))};et.defaultProps={big:!1,loading:!1};var tt=Object(s.a)({cardRoot:function(e){return{width:e.big?"auto":"300px",padding:e.big?"inherit":"0px","& .bp3-card.bp3-interactive":{margin:"1em",padding:0}}},cardContentContainer:{position:"relative",textAlign:"center",height:300,width:300},cardHeader:{position:"absolute",bottom:"0px",right:"0px",left:"0px",padding:"8px",margin:"0",color:"white",background:"rgba(0, 0, 0, 0.54)"},cardImage:{maxHeight:300,maxWidth:300},cardTextContainer:{fontSize:"12pt",padding:"8px"},cardTextGroup:{fontSize:"10pt",color:"grey"},buttonContainer:{padding:"8px",position:"relative"},button:{marginRight:"8px"}})(et),at=a(19),nt=a(183),rt=a(87),ct=a(130),ot=a.n(ct),it=a(131),lt=a.n(it);var st=function(e){var t=e.filter,a=e.onChange,n=e.column;return r.a.createElement("input",{className:Ze.a.INPUT,type:"text",style:{width:"100%"},placeholder:n.Placeholder,value:t?t.value:"",onChange:function(e){return a(e.target.value)}})};var ut=function(e){return r.a.createElement("button",Object.assign({type:"button"},e,{className:Ze.a.BUTTON}),r.a.createElement(at.a,{icon:e.icon}))};var dt=Object(s.a)({pagination:{"&.-pagination":{justifyContent:"flex-end"}}})(function(e){var t=e.onPageChange,a=e.pages,c=e.page,o=e.showPageSizeOptions,i=e.pageSizeOptions,l=e.pageSize,s=e.showPageJump,u=e.canPrevious,d=e.canNext,m=e.onPageSizeChange,p=e.className,f=e.pageJumpText,g=e.nextText,b=e.pageText,v=e.previousText,h=e.style,E=e.rowsSelectorText,C=e.rowsText,O=e.ofText,x=e.classes,T=Object(n.useState)({page:c}),j=Object(y.a)(T,2),F=j[0],D=j[1],N=Object(n.useCallback)(function(e){var t=e;return Number.isNaN(e)&&(t=c),Math.min(Math.max(t,0),a-1)}),w=Object(n.useCallback)(function(e){var a=N(e);D({safePage:a}),c!==a&&t(a)}),k=Object(n.useCallback)(function(e){e&&e.preventDefault(),w(""===c?c:F.page)});return r.a.createElement("div",{className:"".concat(p||""," -pagination ").concat(x.pagination),style:h},r.a.createElement("span",{className:"-pageInfo"},b," ",s?r.a.createElement("div",{className:"-pageJump"},r.a.createElement("input",{"aria-label":f,type:""===F.page?"text":"number",onChange:function(e){var t=e.target.value;return D(""===t?{page:t}:{page:N(t-1)})},value:""===F.page?"":F.page+1,onBlur:k,onKeyPress:function(e){13!==e.which&&13!==e.keyCode||k()}})):r.a.createElement("span",{className:"-currentPage"},c+1)," ".concat(O," "),r.a.createElement("span",{className:"-totalPages"},a||1)),o&&r.a.createElement("span",{className:"select-wrap -pageSizeOptions"},r.a.createElement("select",{"aria-label":E,onChange:function(e){return m(Number(e.target.value))},value:l},i.map(function(e,t){return r.a.createElement("option",{key:t,value:e},"".concat(e," ").concat(C))}))),r.a.createElement("div",{className:"pagination-buttons"},r.a.createElement(ut,{icon:"double-chevron-left",onClick:function(){u&&w(0)},disabled:!u}),r.a.createElement(ut,{icon:"chevron-left",onClick:function(){u&&w(c-1)},disabled:!u},v),r.a.createElement(ut,{icon:"chevron-right",onClick:function(){d&&w(c+1)},disabled:!d}),r.a.createElement(ut,{icon:"double-chevron-right",onClick:function(){d&&w(a-1)},disabled:!d},g)))});Object.assign(rt.a,{FilterComponent:st,PaginationComponent:dt});var mt=ot()(rt.b);function pt(e){var t=e.classes,a=e.data,c=e.columns,o=e.getTdProps,i=e.getTrProps,l=e.getTableProps,s=e.resolveData,u=Object(n.useState)({selected:{}}),d=Object(y.a)(u,2),m=d[0],p=d[1],f=!(Object.keys(m.selected).length>0)||!1===lt()(m.selected,function(e){return!e});return r.a.createElement(mt,{data:a,filterable:!0,resolveData:s,keyField:"id",selectAll:!f,toggleSelection:function(e){p(Object(W.a)({},m,{selected:Object(W.a)({},m.selected,Object(B.a)({},e,!m.selected[e]))}))},isSelected:function(e){return m.selected[e]},toggleAll:function(){p(Object(W.a)({},m,{selected:a.reduce(function(e,t){return e[t.id]=!e[t.id],e},m.selected)}))},selectType:"checkbox",getTrProps:i,getTdProps:o,getTableProps:l,showPageJump:!1,defaultFilterMethod:function(e,t){return-1!==String(t[e.id]).toLowerCase().indexOf(e.value.toLowerCase())},columns:c,className:"-striped -highlight ".concat(t.table)})}pt.defaultProps={getTdProps:void 0,getTrProps:void 0,getTableProps:void 0,resolveData:void 0};var ft=Object(s.a)({table:{"& .rt-th.rt-resizable-header":{paddingTop:"0.5em",overflow:"hidden"},"& .rt-tr.selected.-odd, .rt-tr.selected.-even":{backgroundColor:"#5C7080"},"& .groups":{display:"flex",justifyContent:"space-evenly"},"& .select-wrap select":{backgroundColor:"rgba(16, 22, 26, 0.3)",color:"white"},"& .rt-tr-group":{flex:"0 0 auto"},"& .rt-table":{minHeight:"calc( 100vh - 5.7rem )"},"& .edit-item, .delete-item":{textAlign:"center"}}})(pt),gt=Qe.b.div({hoverable:!0,init:{scale:1},hover:{scale:1.2}}),bt=[{Header:"Name",accessor:"name",Placeholder:"Search by name..."},{Header:"Email",accessor:"email",Placeholder:"Search by email...",Cell:function(e){return r.a.createElement("span",{className:"email"},r.a.createElement(at.a,{icon:"envelope"}),"  ".concat(e.value))},Filter:function(){return null}},{Header:"Phone Number",accessor:"phoneNumber",Placeholder:"Search by phone number...",Cell:function(e){return!!e.value&&r.a.createElement("span",{className:"phoneNumber"},r.a.createElement(at.a,{icon:"phone"}),"  ".concat(e.value))}},{Header:"Groups",accessor:"groupNames",Placeholder:"Search by group...",Cell:function(e){return r.a.createElement("span",{className:"groups"},!!e.value&&e.value.split(",").map(function(e){return r.a.createElement(nt.a,{key:e},r.a.createElement(at.a,{icon:"people"}),e)}))}},{Header:"Edit",sortable:!1,resizable:!1,filterable:!1,width:50,className:"edit-item",Cell:function(){return r.a.createElement(gt,null,r.a.createElement(at.a,{icon:"edit"}))}},{Header:"Delete",sortable:!1,resizable:!1,filterable:!1,width:50,className:"delete-item",Cell:function(){return r.a.createElement(gt,null,r.a.createElement(at.a,{icon:"delete"}))}}],vt=function(e,t){e(),t&&t()},ht=function(e,t,a){switch(a.Header){case"Edit":return{onClick:function(e,a){vt(function(){We.transitionToEditContact({id:t.original.id})},a)}};case"Delete":return{onClick:function(e,a){vt(function(){Se.deleteContact(t.original.id)},a)}};default:return{}}},Et=function(e,t){return{className:t&&t.original&&t.original.selected?"selected":"",onClick:function(e,a){vt(function(){We.transitionToEditContact({id:t.original.id})},a)}}};var Ct=function(e){var t=e.list,a=e.route;return r.a.createElement(ft,{resolveData:function(e){return e.map(function(e){return Object(W.a)({},e,{selected:a.params.id===e.id})})},getTrProps:Et,getTdProps:ht,data:t,filterable:!0,columns:bt})},Ot=Qe.b.div({hoverable:!0,init:{scale:1},hover:{scale:1.2}}),xt=Qe.b.div({enter:{opacity:1,transition:function(e){return{delay:50*e.i}}},exit:{opacity:0},props:{i:0}});function Tt(e){return e.list.map(function(e){return r.a.createElement(tt,{key:"contact-".concat(e.id),contact:e,onEditClick:function(){return We.transitionToEditContact({id:e.id})},onDeleteClick:function(){return Se.deleteContact(e.id)}})})}function jt(e){var t=e.classes,a=e.list,n=e.route;return r.a.createElement(Qe.a,null,a.map(function(e,a){return r.a.createElement(xt,{key:"contact-".concat(e.id),id:e.id,i:a},r.a.createElement("div",{role:"presentation",onKeyPress:function(t){return"Enter"===t.key&&We.transitionToContactDetail({id:e.id})},onClick:function(){return We.transitionToContactDetail({id:e.id})},className:"bp3-tag bp3-interactive ".concat(t.contactListItem," ").concat(n.params.id===e.id?"selected":"")},r.a.createElement("div",{style:{display:"flex"}},e.imgUrl?r.a.createElement(Ot,null,r.a.createElement("img",{src:e.imgUrl,alt:e.name,className:t.contactListItemImage})):r.a.createElement(Ot,{className:t.contactListItemAvatar},e.name.substring(0,1).toUpperCase()),r.a.createElement("div",{className:t.contactListItemTextContainer},r.a.createElement("div",{className:t.contactListItemText1stLine},e.name),r.a.createElement("div",{className:t.contactListItemText2ndLine},e.groupNames||"Without group"))),r.a.createElement(Ot,null,r.a.createElement(g.b,{icon:"delete",onClick:function(t){Se.deleteContact(e.id),t.stopPropagation()}}))))}))}var yt=r.a.memo(function(e){var t=Y("ContactList",{contacts:Ie,global:ue},{contacts:Le.contactList,global:Le.contactListGlobal}),a=t.contacts,c=t.global,o=Object(n.useCallback)(function(){switch(c.mode){case"list":return r.a.createElement("div",{className:e.classes.contactListItemsContainer},r.a.createElement(jt,Object.assign({},e,{list:Object.values(a.list)})));case"card":return r.a.createElement("div",{className:e.classes.contactListCardsContainer},r.a.createElement(Tt,Object.assign({},e,{list:Object.values(a.list)})));default:return r.a.createElement("div",{className:e.classes.contactListItemsContainer},r.a.createElement(Ct,Object.assign({},e,{list:Object.values(a.list)})))}});return r.a.createElement("div",{className:e.classes.contactListRoot},o())}),Ft=Object(s.a)({contactListItem:{"&.bp3-tag.bp3-interactive":{display:"flex",justifyContent:"space-between",height:"60px",paddingLeft:"8px",margin:"3px",backgroundColor:"#394b59",color:"white",boxShadow:"0 0 0 1px rgba(16, 22, 26, 0.2), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.4)"},"&.bp3-tag.bp3-interactive:hover":{background:"#202B33"},"&.bp3-tag.bp3-interactive.selected":{background:"#5C7080"}},contactListItemImage:{maxWidth:50,minWidth:50,maxHeight:50},contactListItemTextContainer:{display:"flex",flexDirection:"column",alignSelf:"center",marginLeft:"2rem"},contactListItemText1stLine:{fontWeight:"bolder"},contactListItemText2ndLine:{fontSize:"12px"},contactListItemAvatar:{width:"50px",height:"50px",fontSize:"35px",backgroundColor:"#182026",color:"white",textAlign:"center",lineHeight:"50px",borderRadius:"50px"},contactListRoot:{display:"flex",flex:"1 0 auto",flexDirection:"row",height:"calc(100vh - 3.7em)",overflowY:"scroll"},contactListItemsContainer:{display:"flex",flex:"1 0 auto",flexDirection:"column"},contactListCardsContainer:{flexWrap:"wrap"}})(yt);var Dt=Object(s.a)({contactDetailRoot:{margin:"0.5em 1em",width:"300px"}})(function(e){var t=Y("ContactDetail",{contacts:Ie},{contacts:Le.contactDetail}).contacts;return r.a.createElement("div",{className:e.classes.contactDetailRoot},r.a.createElement(tt,{big:!0,contact:t.current,loading:t.loading,onEditClick:function(){return We.transitionToEditContact(e.route.params)},onDeleteClick:function(){return Se.deleteContact(e.route.params.id)}}))}),Nt=a(132),wt=a(133),kt=a(136),St=a(134),At=a(137);function Lt(e){var t={};return Je(e.name)?$e(e.name,4)||(t.name="Name has to 4 o more characters"):t.name="Name is required",t}var It=Object(p.state)({list:{},current:{}});function Pt(){return(Pt=Object(R.a)(M.a.mark(function e(t){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,ge(t);case 3:a=e.sent,Object(p.update)(It,function(e){e.current=a}),e.next=11;break;case 7:return e.next=9,fe();case 9:a=e.sent,Object(p.update)(It,function(e){e.list=a});case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Mt(){return(Mt=Object(R.a)(M.a.mark(function e(t){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.id){e.next=7;break}return e.next=4,ve(t);case 4:H.setMessage("Group updated successfully"),e.next=10;break;case 7:return e.next=9,be(t);case 9:H.setMessage("Group created successfully");case 10:Object(p.update)(It,function(e){e.current=t}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),H.displayError(e.t0);case 16:We.goBack();case 17:case"end":return e.stop()}},e,this,[[0,13]])}))).apply(this,arguments)}var Rt={name:"groups",state:It,actions:{loadData:function(e){return Pt.apply(this,arguments)},saveGroup:function(e){return Mt.apply(this,arguments)}}},_t=Rt.state,zt=Rt.actions,Gt=(U(Rt),function(e){function t(){return Object(Nt.a)(this,t),Object(kt.a)(this,Object(St.a)(t).apply(this,arguments))}return Object(At.a)(t,e),Object(wt.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.route.params.id;e&&zt.loadData(e)}},{key:"componentWillReceiveProps",value:function(e){this.props.route.params.id!==e.route.params.id&&zt.loadData(e.route.params.id)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(p.Subscribe,{to:_t},function(t){return r.a.createElement(f.b,{onSubmit:zt.saveGroup,validate:Lt,initialValues:t.current,render:function(t){var a=t.handleSubmit,n=t.pristine,c=t.invalid,o=t.submitting,i=t.form.reset;return r.a.createElement(u.a,{interactive:!0,elevation:d.a.TWO,className:e.formCard},r.a.createElement("form",{className:e.formContainer,onSubmit:a},r.a.createElement(f.a,{name:"name",label:"Name",placeholder:"Name",component:C}),r.a.createElement("div",{className:e.buttonsContainer},r.a.createElement(g.b,{icon:"floppy-disk",intent:"success",type:"submit",disabled:n||o||c,text:"Save group"}),r.a.createElement(g.b,{icon:"refresh",intent:"danger",onClick:i,disabled:n||o,text:"Reset values"}))))}})})}}]),t}(n.Component)),Ht=Object(s.a)({formCard:{width:"300px",margin:"0.5em 1em",padding:"1em"},formContainer:{paddingTop:"16px"},buttonsContainer:{display:"flex",justifyContent:"space-between"}})(Gt),Ut=a(72),Wt={sidebar:{root:{position:"initial"},content:{display:"none"},overlay:{display:"none"},sidebar:{background:"#30404d",paddingTop:"3.5rem"}}};var Bt=Object(s.a)(Wt)(function(e){var t=Y("DrawerMenu",{global:ue},{global:se.drawerMenu}).global,a=t.isOpen;return t.isSmallScreen?r.a.createElement(Ut.a,{open:a,pullRight:!0,touch:!0,styles:Wt.sidebar,onSetOpen:function(e){le.setRightMenuVisibility(e)},sidebar:r.a.createElement("div",null,r.a.createElement(g.b,{className:"bp3-minimal",icon:"cross",onClick:function(){return le.setRightMenuVisibility(!1)}}),e.children)},r.a.createElement(g.b,{className:"bp3-minimal",icon:"menu",onClick:function(){return le.setRightMenuVisibility(!a)}})):e.children});var Vt=Object(s.a)({contactDetailsLayout:{display:"flex",flex:"1 0 auto"},editContactLayout:{display:"flex",flex:"1 0 auto"}})(function(e){var t=e.route,a=e.classes;if(!t)return r.a.createElement(m,{route:t});switch(t.name){case k.ADD_GROUP:return r.a.createElement(Ht,{route:t});case k.CONTACT_DETAILS:return r.a.createElement("div",{className:a.contactDetailsLayout},r.a.createElement(Ft,{route:t}),r.a.createElement(Bt,null,r.a.createElement(Dt,{route:t})));case k.LIST_CONTACTS:return r.a.createElement(Ft,{route:t});case k.ADD_CONTACT:return r.a.createElement(Ye,{route:t});case k.EDIT_CONTACT:return r.a.createElement("div",{className:a.editContactLayout},r.a.createElement(Ft,{route:t}),r.a.createElement(Bt,null,r.a.createElement(Ye,{route:t})));case k.HOME:default:return r.a.createElement(m,{route:t})}}),Jt=a(315),qt=a(25),Kt=a(304),$t=a(306),Xt=a(28),Yt=function(e){var t=e.changeListMode;return r.a.createElement(Kt.a,{content:r.a.createElement($t.a,null,r.a.createElement(x.a,{text:"List",onClick:function(){return t("list")}}),r.a.createElement(x.a,{text:"Card",onClick:function(){return t("card")}}),r.a.createElement(x.a,{text:"Table",onClick:function(){return t("table")}})),position:Xt.a.RIGHT_TOP},r.a.createElement(g.b,{icon:"more"}))};var Qt=function(e){var t=e.route;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Jt.a,null,r.a.createElement(Jt.a.Group,{align:qt.a.LEFT},r.a.createElement(g.b,{className:"bp3-minimal",icon:"menu",onClick:le.toggleLeftMenu}),r.a.createElement(Jt.a.Divider,null),r.a.createElement(Jt.a.Heading,null,"Contacts app")),r.a.createElement(Jt.a.Group,{align:qt.a.RIGHT},t.name===k.LIST_CONTACTS?r.a.createElement(Yt,{changeListMode:le.changeMode}):null)))},Zt=a(312),ea=a(305),ta=a(313);var aa=function(){var e=Y("Loader",{global:ue},{global:se.loader}).global;return r.a.createElement(Zt.a,{position:Xt.a.TOP},e.loading.state?r.a.createElement(ea.a,{message:r.a.createElement("div",null,r.a.createElement("span",null,"Loading ".concat(e.loading.message,"...")),r.a.createElement(ta.a,null))}):null)};var na=function(){return r.a.createElement(p.Subscribe,{to:G},function(e){return r.a.createElement(Zt.a,{position:Xt.a.BOTTOM},e?r.a.createElement(ea.a,{message:e||"",timeout:3e3,onDismiss:H.close}):null)})},ra={sidebar:{sidebar:{background:"#30404d"}},leftMenuRoot:{paddingTop:"4rem","&.selected":{background:"#5C7080"}}};var ca=Object(s.a)(ra)(function(e){var t=e.route,a=e.smallScreen,n=e.classes;function c(e){!function(e){We.transitionToMenuOption(e.target.textContent)}(e),a&&le.toggleLeftMenu()}return r.a.createElement($t.a,{className:n.leftMenuRoot},r.a.createElement(x.a,{active:t.name===k.HOME,onClick:c,text:"About"}),r.a.createElement(x.a,{active:-1!==[k.LIST_CONTACTS,k.CONTACT_DETAILS,k.EDIT_CONTACT].indexOf(t.name),onClick:c,text:"List"}),r.a.createElement(x.a,{active:t.name===k.ADD_CONTACT,onClick:c,text:"Add Contact"}),r.a.createElement(x.a,{active:t.name===k.ADD_GROUP,onClick:c,text:"Add Group"}))});var oa=function(e){var t=Y("LeftMenu",{global:ue},{global:se.leftMenu}).global,a=t.isOpen,n=t.isSmallScreen;return!!a&&(n?r.a.createElement(Ut.a,{open:a,styles:ra.sidebar,onSetOpen:le.toggleLeftMenu,sidebar:r.a.createElement(ca,Object.assign({smallScreen:n},e))},!1):r.a.createElement(ca,Object.assign({smallScreen:n},e)))};var ia,la=function(e){var t=Object(l.a)({},e),a=Y("App",{history:Be}).history.route;return r.a.createElement("div",{className:"bp3-fill",style:{backgroundColor:"#30404d",minHeight:"100vh"}},r.a.createElement(Qt,{route:a}),r.a.createElement(aa,null),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(oa,{route:a}),r.a.createElement(Vt,Object.assign({route:a},t))),r.a.createElement(na,null))},sa=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ua(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}ia=window.__REDUX_DEVTOOLS_EXTENSION__?function(){return r.a.createElement(i.a,null,r.a.createElement(la,null))}:function(){return r.a.createElement(la,null)},o.a.render(r.a.createElement(ia,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/ContactsAppRematch",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/ContactsAppRematch","/service-worker.js");sa?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ua(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ua(e)})}}()}},[[141,2,1]]]);
//# sourceMappingURL=main.88dd0346.chunk.js.map